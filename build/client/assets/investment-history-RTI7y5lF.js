import{_ as N,d as y,t as M}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{_ as z}from"./VPaginator.vue_vue_type_script_setup_true_lang-d1R-1bBh.js";import{s as I,a as P}from"./index-DXvl-esB.js";import{s as Y}from"./index-Cf5x4JsD.js";import{d as B,h as _,j as S,X as O,i as F,c as j,w as i,a,q as s,v as l,s as K,D as q,p,x as r,U as G,o as H}from"./main-CE88ee4Q.js";import{_ as Q}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{s as W}from"./index-BGiSEDGv.js";import{u as X}from"./use-swrv-ttgJgnvy.js";import{$ as J}from"./use-fetch-CNl_4VEC.js";import"./index-DHTAa8Us.js";import"./index-Drofbpnb.js";import"./index-wutX35Rh.js";import"./index-BPNPmUFq.js";import"./index-B88Wmsvc.js";const Z={class:"v-card p-3"},ee={class:"flex-center-between"},te={class:"hidden md:flex items-end gap-2 justify-end"},se={class:"grid gap-1"},ae={class:"flex flex-col gap-2"},oe={class:"grid gap-1"},le={class:"grid grid-cols-2 gap-2 mt-2"},ne={class:"mt-2 h-[calc(100dvh-10rem)] md:h-[calc(100dvh-11rem)]"},ie={class:"w-full h-full overflow-y-auto rounded-lg"},De=B({__name:"investment-history",setup(de){const m=_(0),v=O,u=_(!1),g=_(["ALL","OPEN","PAUSED","CLOSED","TERMINATED"]),d=_(g.value[0]),$=S(()=>{const o=new URLSearchParams;return o.set("take",v.toString()),o.set("skip",(m.value*v).toString()),o.set("sort","createdAt,desc"),d.value!=="ALL"&&o.set("where",`investmentStatus,${d.value}`),o.toString()});F(d,()=>m.value=0);const{isLoading:h,data:c,error:w,mutate:b}=X(()=>`/api/users/me/investments?${$.value}`,J),L=S(()=>{var o;return((o=c.value)==null?void 0:o.investments.length)||0}),T=S(()=>{var o;return!!((o=c.value)!=null&&o.investments)&&c.value.investments.length<v}),x=()=>{m.value=0,b()};return(o,t)=>{const D=W,f=K,C=Q,V=q,n=I,E=Y,A=P,U=z,k=N;return H(),j(k,{name:"user"},{default:i(()=>{var R;return[a("div",null,[a("div",Z,[a("div",ee,[t[10]||(t[10]=a("h1",{class:"text-lg font-semibold text-primary-500 dark:text-primary-400"}," Investment History ",-1)),a("div",te,[a("div",se,[t[9]||(t[9]=a("p",{class:"text-sm font-medium text-mute text-right"},"Status",-1)),s(D,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),size:"small",options:g.value},null,8,["modelValue","options"])]),s(f,{onClick:x,loading:l(h),label:"Submit",size:"small"},null,8,["loading"])]),s(f,{onClick:t[1]||(t[1]=e=>u.value=!0),class:"md:hidden",label:"Filters",icon:"pi pi-filter","icon-pos":"right",size:"small"})]),s(C,{error:l(w),"should-retry":"",onRetry:t[2]||(t[2]=e=>l(b)()),class:"mt-2"},null,8,["error"]),s(V,{visible:u.value,"onUpdate:visible":t[6]||(t[6]=e=>u.value=e),modal:"",header:"Filters",class:"w-80"},{default:i(()=>[a("div",ae,[a("div",oe,[t[11]||(t[11]=a("p",{class:"text-sm font-medium text-mute"},"Status",-1)),s(D,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=e=>d.value=e),size:"small",options:g.value},null,8,["modelValue","options"])]),a("div",le,[s(f,{onClick:t[4]||(t[4]=e=>u.value=!1),size:"small",severity:"secondary",label:"Close"}),s(f,{onClick:t[5]||(t[5]=e=>{u.value=!1}),loading:l(h),size:"small",label:"Submit"},null,8,["loading"])])])]),_:1},8,["visible"])]),a("div",ne,[a("div",ie,[s(A,{loading:l(h),value:(R=l(c))==null?void 0:R.investments,selectionMode:"single",dataKey:"id",metaKeySelection:!1,stripedRows:"",onRowSelect:t[7]||(t[7]=e=>o.$router.push({name:"user-investment-item",params:{investment_id:e.data.id}})),tableStyle:"min-width: 50rem; white-space: nowrap"},{default:i(()=>[s(n,{field:"initialDeposit",header:"Deposit"},{body:i(({data:e})=>[p(r(l(y).format(e.initialDeposit)),1)]),_:1}),s(n,{field:"investmentName",header:"Name"}),s(n,{field:"investmentTier",header:"Tier"}),s(n,{field:"initialDeposit",header:"Auto-compounded"},{body:i(({data:e})=>[p(r(e.autocompounded?"Yes":"No"),1)]),_:1}),s(n,{field:"expectedReturnRate",header:"Rate"},{body:i(({data:e})=>[p(r(`${e.autocompounded?e.autocompoundedReturnRate:e.expectedReturnRate}%`),1)]),_:1}),s(n,{header:"Expected Return"},{body:i(({data:e})=>[p(r(l(y).format(e.expectedTotalReturns)),1)]),_:1}),s(n,{header:"Current Return"},{body:i(({data:e})=>[p(r(l(y).format(e.currentTotalReturns)),1)]),_:1}),s(n,{field:"duration",header:"Duration (days)"}),s(n,{field:"daysCompleted",header:"Days Completed"}),s(n,{field:"createdAt",header:"Date"},{body:i(({data:e})=>[a("p",null,r(l(G)(e.createdAt,"dddd YYYY-MM-DD, hh:mm:ss A",{locales:"en-US"})),1)]),_:1}),s(n,{field:"investmentStatus",header:"Status"},{body:i(({data:e})=>[s(E,{severity:e.investmentStatus==="OPEN"?"":e.status==="CLOSED"?"success":"danger",value:l(M)(e.investmentStatus)},null,8,["severity","value"])]),_:1})]),_:1},8,["loading","value"]),s(U,{allLoaded:T.value,length:L.value,rows:l(v),page:m.value,"onUpdate:page":t[8]||(t[8]=e=>m.value=e)},null,8,["allLoaded","length","rows","page"])])])])]}),_:1})}}});export{De as default};
