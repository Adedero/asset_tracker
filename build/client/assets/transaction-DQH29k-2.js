import{_ as E,t as D,a as L}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{_ as R}from"./transaction-status-manager.vue_vue_type_script_setup_true_lang-D0dqd1nh.js";import{d as V,V as U,c as m,w as r,a as t,q as i,x as o,v as s,b as l,e as d,N as M,n as P,p as u,s as Y,t as G,U as S,o as n}from"./main-CE88ee4Q.js";import{s as q}from"./index-Cf5x4JsD.js";import{_ as F}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{_ as O}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{$ as B}from"./use-fetch-CNl_4VEC.js";import{u as H}from"./use-swrv-ttgJgnvy.js";import{I}from"./iconify-0_DS-cBL.js";import"./index-BXAGMbEd.js";import"./index-wutX35Rh.js";import"./index-BPNPmUFq.js";import"./index-B88Wmsvc.js";import"./bundle-mjs-CLJs87Zn.js";const j={class:"text-lg font-semibold text-primary-500"},J={class:"text-sm"},K={class:"mt-2"},Q={key:2},X={class:"md:h-[calc(100dvh-8.5rem)] grid md:grid-cols-3 gap-2"},Z={class:"md:h-full md:overflow-y-auto md:col-span-2"},tt={class:"grid gap-2 md:grid-cols-3"},st={class:"text-xl font-semibold"},et={class:"text-sm"},at={class:"mt-2"},ot={key:0,class:"mt-2"},nt={key:1,class:"mt-2"},it={key:0,class:"mt-2"},rt={key:1,class:"mt-2"},lt={class:"mt-2"},dt={class:"grid gap-2"},ct={key:0,class:"contents"},pt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},mt={class:"text-right font-semibold"},ut={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},ft={class:"text-right font-semibold"},xt={key:1,class:"contents"},_t={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},vt={class:"text-right font-semibold"},bt={key:0,class:"contents"},ht={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},yt={class:"text-right font-semibold"},gt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},kt={class:"text-xs text-mute"},wt={class:"text-right font-semibold"},Tt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Dt={class:"text-xs text-mute"},St={class:"text-right font-semibold"},It={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},At={class:"text-xs text-mute"},zt={class:"text-right font-semibold break-all"},Nt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Wt={class:"text-right font-semibold"},Ct={key:2,class:"contents"},$t={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Et={class:"text-right font-semibold"},Lt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Rt={class:"text-right font-semibold"},Vt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Ut={class:"text-right font-semibold"},Mt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Pt={class:"text-right font-semibold"},Yt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Gt={class:"text-xs text-mute"},qt={class:"text-right font-semibold"},Ft={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Ot={class:"text-xs text-mute"},Bt={class:"text-right font-semibold"},Ht={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},jt={class:"text-right font-semibold"},Jt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Kt={class:"text-right font-semibold"},Qt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Xt={class:"text-right font-semibold"},Zt={key:3,class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},ts={class:"text-right font-semibold"},ss={key:0},es={key:1},as={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},os={class:"text-right font-semibold"},ns={key:4,class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},is={class:"text-right font-semibold"},rs={class:"md:h-full md:overflow-y-auto"},ls={class:"flex flex-col items-center justify-center gap-2 text-center"},ds={class:"w-32 aspect-square rounded-full overflow-hidden bg-slate-200 dark:bg-slate-800"},cs=["src"],ps={class:"font-semibold md:text-lg"},ms={class:"text-sm text-mute"},us={key:0,class:"v-card w-full !p-2 border dark:border-white/30 dark:bg-slate-800"},fs={class:"text-sm break-all"},xs={key:1,class:"contents"},_s={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},vs={class:"my-1"},bs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},hs={class:"my-1"},ys={key:2,class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Rs=V({__name:"transaction",setup(gs){const _=U(),{transaction_id:A}=_.currentRoute.value.params,{isLoading:z,data:a,error:y,mutate:g}=H(()=>`/api/admins/me/transactions/${A}`,B),k=async c=>{a.value&&await g(()=>Promise.resolve({success:!0,message:"Transaction updated successfully",transaction:{...a.value.transaction,...c}}))};function w(c){return c==="DEPOSIT"?{icon:"arrow-circle-down",color:"text-primary-500"}:c==="WITHDRAWAL"?{icon:"arrow-circle-up",color:"text-red-500"}:c==="INVESTMENT"?{icon:"spa",color:"text-green-500"}:{icon:"payments",color:"text-green-500"}}function N(c){return c==="SUCCESSFUL"?"success":c==="PENDING"?"warn":"danger"}return(c,e)=>{const p=O,W=M,C=F,v=q,f=Y,b=G("RouterLink"),h=L,T=R,$=E;return n(),m($,{name:"admin"},{default:r(()=>[t("div",null,[i(p,{class:"p-2"},{default:r(()=>{var x;return[t("div",j,[e[3]||(e[3]=t("span",null,"Transaction ",-1)),t("span",J,"ID: "+o((x=s(a))==null?void 0:x.transaction.id),1)])]}),_:1}),t("div",K,[s(z)?(n(),m(W,{key:0})):s(y)?(n(),m(C,{key:1,error:s(y),"should-retry":"",onRetry:e[0]||(e[0]=x=>s(g)())},null,8,["error"])):s(a)?(n(),l("div",Q,[t("div",X,[t("div",Z,[t("div",tt,[i(p,{header:"Amount"},{default:r(()=>[t("div",st,[t("span",null," $"+o(s(a).transaction.amountInUSD.toLocaleString().split(".")[0])+".",1),t("span",et,o(s(a).transaction.amountInUSD.toLocaleString().split(".")[1]??"00"),1)])]),_:1}),i(p,{header:"Type"},{default:r(()=>[t("div",{class:P(["flex items-center gap-1 font-semibold text-lg",w(s(a).transaction.transactionType).color])},[i(s(I),{size:"20",icon:`ic:baseline-${w(s(a).transaction.transactionType).icon}`},null,8,["icon"]),t("p",null,o(s(D)(s(a).transaction.transactionType)),1)],2)]),_:1}),i(p,{header:"Status"},{default:r(()=>[i(v,{class:"font-semibold",severity:N(s(a).transaction.transactionStatus),value:s(D)(s(a).transaction.transactionStatus)},null,8,["severity","value"])]),_:1})]),t("div",at,[s(a).transaction.isWireTransfer?(n(),m(p,{key:0},{header:r(()=>[i(v,{value:"Wire Transfer",severity:"info",icon:"pi pi-bolt"})]),default:r(()=>[s(a).transaction.transactionStatus==="PENDING"?(n(),l("div",ot,[e[4]||(e[4]=t("p",{class:"text-sm text-mute"},[u(" This is a "),t("span",{class:"font-medium"},"Wire Transfer"),u(" deposit request. You need to send the details of the transfer to the user's email. ")],-1)),i(b,{to:{name:"admin-email-service",query:{to_name:s(a).transaction.user.name,to_address:s(a).transaction.user.email}}},{default:r(()=>[i(f,{size:"small",label:"Send mail",icon:"pi pi-envelope"})]),_:1},8,["to"])])):(n(),l("div",nt,e[5]||(e[5]=[u(" This is a "),t("span",{class:"font-medium"},"Wire Transfer",-1),u(" deposit request. The transfer details have been sent to the client's email ")])))]),_:1})):d("",!0),s(a).transaction.isGiftCard?(n(),m(p,{key:1},{header:r(()=>[i(v,{value:"Gift Card Deposit",severity:"info",icon:"pi pi-credit-card"})]),default:r(()=>[s(a).transaction.transactionStatus==="PENDING"?(n(),l("div",it,[e[6]||(e[6]=t("p",{class:"text-sm text-mute"},[u(" This is a "),t("span",{class:"font-medium"},"Gift Card"),u(" deposit request. You need to validate the gift cards and credit the user's account. ")],-1)),i(b,{to:{name:"admin-gift-card-validate",params:{transaction_id:s(a).transaction.id}}},{default:r(()=>[i(f,{label:"Validate Gift Cards",size:"small"})]),_:1},8,["to"])])):(n(),l("div",rt,[e[7]||(e[7]=t("p",null,"Gift cards have been validated.",-1)),i(b,{to:{name:"admin-gift-card-validation-report",params:{transaction_id:s(a).transaction.id}}},{default:r(()=>[i(f,{label:"View Gift Card Validation Report",size:"small"})]),_:1},8,["to"])]))]),_:1})):d("",!0)]),t("div",lt,[i(p,{header:"Details"},{default:r(()=>[t("div",dt,[s(a).transaction.transactionType==="INVESTMENT"||s(a).transaction.transactionType==="PROFIT"?(n(),l("div",ct,[t("div",pt,[e[8]||(e[8]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-dollar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Amount")],-1)),t("p",mt," $"+o(s(a).transaction.amountInUSD.toLocaleString()),1)]),t("div",ut,[e[9]||(e[9]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-info-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Investment ID")],-1)),t("p",ft,o(s(a).transaction.investmentId),1)])])):d("",!0),s(a).transaction.transactionType==="DEPOSIT"?(n(),l("div",xt,[t("div",_t,[e[10]||(e[10]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-dollar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Deposit Amount")],-1)),t("p",vt," $"+o(s(a).transaction.amountInUSD.toLocaleString()),1)]),s(a).transaction.isWireTransfer?d("",!0):(n(),l("div",bt,[t("div",ht,[e[11]||(e[11]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-bitcoin text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Selected Currency")],-1)),t("p",yt,o(s(a).transaction.currency),1)]),t("div",gt,[e[12]||(e[12]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-arrow-right-arrow-left text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Exchange Rate")],-1)),t("p",kt,o(`1 ${s(a).transaction.currency} in USD`),1),t("p",wt,"$"+o(s(a).transaction.rate),1)]),t("div",Tt,[e[13]||(e[13]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-money-bill text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"}," Amount in selected currency ")],-1)),t("p",Dt,o(s(a).transaction.currency),1),t("p",St,o(s(a).transaction.amountInCurrency),1)]),t("div",It,[e[14]||(e[14]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-wallet text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Your Wallet Address")],-1)),t("p",At," Wallet address provided by you for "+o(s(a).transaction.currency??"crypto")+" deposits. ",1),t("p",zt,o(s(a).transaction.depositWalletAddress??"No address provided"),1)]),t("div",Nt,[e[15]||(e[15]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-sitemap text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Wallet Address Network")],-1)),t("p",Wt,o(s(a).transaction.depositWalletAddressNetwork??"No wallet address network provided"),1)])]))])):d("",!0),s(a).transaction.transactionType==="WITHDRAWAL"?(n(),l("div",Ct,[t("div",$t,[e[16]||(e[16]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-dollar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Amount Requested")],-1)),t("p",Et," $"+o(s(a).transaction.amountInUSD.toLocaleString()),1)]),t("div",Lt,[e[17]||(e[17]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-dollar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Withdrawal Charge")],-1)),t("p",Rt," $"+o(s(a).transaction.charge.toLocaleString()),1)]),t("div",Vt,[e[18]||(e[18]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-dollar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Actual Amount")],-1)),t("p",Ut," $"+o(s(a).transaction.actualAmountInUSD.toLocaleString()),1)]),t("div",Mt,[e[19]||(e[19]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-bitcoin text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Selected Currency")],-1)),t("p",Pt,o(s(a).transaction.currency),1)]),t("div",Yt,[e[20]||(e[20]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-arrow-right-arrow-left text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Exchange Rate")],-1)),t("p",Gt,o(`1 ${s(a).transaction.currency} in USD`),1),t("p",qt,"$"+o(s(a).transaction.rate),1)]),t("div",Ft,[e[21]||(e[21]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-money-bill text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Amount in selected currency")],-1)),t("p",Ot,o(s(a).transaction.currency),1),t("p",Bt,o(s(a).transaction.amountInCurrency),1)]),t("div",Ht,[e[22]||(e[22]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-wallet text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Client's Wallet Address")],-1)),e[23]||(e[23]=t("p",{class:"text-xs text-mute"}," Wallet address provided by client for withdrawal. ",-1)),t("p",jt,o(s(a).transaction.withdrawalWalletAddress??"No address provided"),1)]),t("div",Jt,[e[24]||(e[24]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-sitemap text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Wallet Address Network")],-1)),t("p",Kt,o(s(a).transaction.withdrawalWalletAddressNetwork??"No wallet address network provided"),1)])])):d("",!0),t("div",Qt,[e[25]||(e[25]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-calendar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Created Date")],-1)),t("p",Xt,o(s(S)(new Date(s(a).transaction.createdAt),"ddd, DD MMM, YYYY hh:mm aa")),1)]),s(a).transaction.transactionType==="DEPOSIT"||s(a).transaction.transactionType==="WITHDRAWAL"?(n(),l("div",Zt,[e[26]||(e[26]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-calendar-clock text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Approval Date")],-1)),t("p",ts,[s(a).transaction.approvedAt?(n(),l("span",ss,o(s(S)(new Date(s(a).transaction.approvedAt),"ddd, DD MMM, YYYY hh:mm aa")),1)):(n(),l("span",es,"Not approved"))])])):d("",!0),t("div",as,[e[27]||(e[27]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-info-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Description")],-1)),t("p",os,o(s(a).transaction.description||"No description provided"),1)]),s(a).transaction.transactionStatus==="FAILED"?(n(),l("div",ns,[e[28]||(e[28]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-question-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Reason for Failure")],-1)),t("p",is,o(s(a).transaction.failReason||"No reason provided"),1)])):d("",!0)])]),_:1})])]),t("div",rs,[s(a).transaction.user?(n(),m(p,{key:0,header:"User",class:"w-full"},{default:r(()=>[t("div",ls,[t("div",ds,[s(a).transaction.user.image?(n(),l("img",{key:0,src:s(a).transaction.user.image,class:"w-full h-full object-cover"},null,8,cs)):d("",!0),i(s(I),{icon:"ic:baseline-account-circle",class:"font-size: 8rem text-primary-500"})]),t("div",null,[t("p",ps,o(s(a).transaction.user.name),1),t("p",ms,o(s(a).transaction.user.email),1)]),i(f,{onClick:e[1]||(e[1]=x=>s(_).push({name:"admin-user-item",params:{user_id:s(a).transaction.user.id}})),label:"Profile",icon:"pi pi-user",outlined:""})])]),_:1})):d("",!0),i(p,{header:"Actions",class:"w-full mt-2 grid gap-2"},{default:r(()=>[s(a).transaction.transactionType==="INVESTMENT"||s(a).transaction.transactionType==="PROFIT"?(n(),l("div",us,[e[29]||(e[29]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-info-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Investment ID")],-1)),t("p",fs,o(s(a).transaction.investmentId),1),i(f,{onClick:e[2]||(e[2]=x=>s(_).push({name:"admin-investment-item",params:{investment_id:s(a).transaction.investmentId}})),label:"View Investment",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",class:"mt-2",fluid:"",outlined:""})])):s(a).transaction.transactionStatus==="PENDING"?(n(),l("div",xs,[t("div",_s,[e[32]||(e[32]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-check-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Approve Transaction")],-1)),t("div",vs,[s(a).transaction.transactionType==="WITHDRAWAL"?(n(),m(h,{key:0,size:"small"},{default:r(()=>e[30]||(e[30]=[t("p",{class:"text-xs"}," Make sure you have transfered the required amount into the client's wallet address before approving this transaction. ",-1)])),_:1,__:[30]})):d("",!0),s(a).transaction.transactionType==="DEPOSIT"?(n(),m(h,{key:1,size:"small"},{default:r(()=>e[31]||(e[31]=[t("p",{class:"text-xs"}," Make sure the client has completed the transfer before approving this transaction. ",-1)])),_:1,__:[31]})):d("",!0)]),i(T,{onUpdate:k,transaction:s(a).transaction,action:"approve",class:"mt-2"},null,8,["transaction"])]),t("div",bs,[e[34]||(e[34]=t("div",{class:"flex items-center"},[t("span",{class:"pi pi-times-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"Fail Transaction")],-1)),t("div",hs,[s(a).transaction.transactionType==="WITHDRAWAL"?(n(),m(h,{key:0,size:"small",severity:"error"},{default:r(()=>e[33]||(e[33]=[t("p",{class:"text-xs"}," The withdrawal amount will be refunded to the client's in-app wallet ",-1)])),_:1,__:[33]})):d("",!0)]),i(T,{onUpdate:k,transaction:s(a).transaction,action:"fail",class:"mt-2"},null,8,["transaction"])])])):(n(),l("div",ys,e[35]||(e[35]=[t("div",{class:"flex items-center"},[t("span",{class:"pi pi-times-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),t("p",{class:"text-mute text-sm font-semibold"},"No Actions")],-1),t("p",{class:"mt-2 text-sm text-primary-500 font-medium"}," There are no actions to perform on this transaction. ",-1)])))]),_:1})])])])):d("",!0)])])]),_:1})}}});export{Rs as default};
