import{_ as F}from"./vue-layout.vue_vue_type_script_setup_true_lang-BNFQYZFa.js";import{_ as S}from"./VCard.vue_vue_type_script_setup_true_lang-7nJJ2y1E.js";import{d as N,Y as q,a1 as z,b as l,a as e,r as A,q as r,s as I,v as n,o as s,c as _,w as p,x as V,t as M,e as D,N as T,F as B,f as L,V as W}from"./main-DbwiCszp.js";import{u as Y,$ as G}from"./use-fetch-CkegAda4.js";import{_ as H}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-CPslCPqh.js";import{_ as J}from"./VNavbar.vue_vue_type_script_setup_true_lang-VZ6PBI-e.js";import{u as K}from"./use-swrv-DVUkzGGN.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-D-TZBpbX.js";const O=N({__name:"investment-plan-deleter",props:{id:{}},emits:["delete"],setup(f,{emit:v}){const g=v,c=q(),{isFetching:a,error:m,data:h,execute:d}=Y(`/api/admins/me/investment-plans/${f.id}`,{immediate:!1}).delete().json(),o=async()=>{if(await d(),m.value||!h.value){c.add({severity:"error",summary:"Error",detail:m.value.message});return}c.add({severity:"success",summary:"Success",detail:"Investment plan deleted",life:3e3}),g("delete",f.id)},i=z(),y=()=>{i.require({message:"Are you sure you want to proceed?",header:"Delete Investment Plan",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{o()}})};return(k,u)=>{const w=I;return s(),l("div",null,[e("div",{onClick:u[0]||(u[0]=P=>y())},[A(k.$slots,"default",{loading:n(a)},()=>[r(w,{label:"Delete",loading:n(a),size:"small",icon:"pi pi-trash",severity:"danger",fluid:"",outlined:""},null,8,["loading"])])])])}}}),Q={class:"flex items-center gap-3"},U={class:"text-primary-500 font-semibold"},X={class:"mt-2 md:h-[calc(100dvh-9rem)]"},Z={key:2,class:"h-full w-full overflow-y-auto"},ee={class:"grid grid-cols-[repeat(auto-fill,minmax(280px,1fr))] gap-3"},te={class:"grid"},se={class:"h-36 w-full overflow-hidden rounded-lg"},ne=["src"],ae={class:"mt-2 flex items-center gap-1 justify-center flex-wrap"},oe={class:"font-medium"},ie={key:0,class:"w-1 aspect-square bg-black rounded-full"},le={class:"mt-2 grid grid-cols-2 gap-2 w-full"},ge=N({__name:"investment-plans",setup(f){const v=W(),{isLoading:g,error:c,data:a,mutate:m}=K("/api/admins/me/investment-plans",G),h=async d=>{if(!a.value)return;const{investmentPlans:o}=a.value;await m(()=>Promise.resolve({success:!0,message:"Investment plan deleted",investmentPlans:o.filter(i=>i.id!==d)}))};return(d,o)=>{const i=I,y=M("RouterLink"),k=J,u=T,w=H,P=O,R=S,j=F;return s(),_(j,{name:"admin"},{default:p(()=>{var $,b;return[e("div",null,[r(k,null,{right:p(()=>{var t;return[e("div",Q,[e("p",U,V((t=n(a))==null?void 0:t.investmentPlans.length),1),r(y,{to:{name:"admin-investment-plan-editor"}},{default:p(()=>[r(i,{label:"New",icon:"pi pi-plus",size:"small"})]),_:1})])]}),_:1}),e("div",X,[n(g)?(s(),_(u,{key:0})):n(c)?(s(),_(w,{key:1,error:n(c),"should-retry":"",onRetry:o[0]||(o[0]=t=>n(m)())},null,8,["error"])):($=n(a))!=null&&$.investmentPlans?(s(),l("div",Z,[e("div",ee,[(s(!0),l(B,null,L((b=n(a))==null?void 0:b.investmentPlans,t=>(s(),_(R,{key:t.id,header:t.name},{default:p(()=>[e("div",te,[e("div",se,[e("img",{src:t.image||"",class:"w-full h-full object-cover"},null,8,ne)]),e("div",ae,[(s(!0),l(B,null,L(t.tiers,(x,E)=>{var C;return s(),l("p",{key:x.name,class:"text-sm flex items-center gap-1"},[e("span",oe,V(x.name),1),E<(((C=t.tiers)==null?void 0:C.length)||0)-1?(s(),l("span",ie)):D("",!0)])}),128))]),e("div",le,[r(i,{onClick:x=>n(v).push({name:"admin-investment-plan-editor",params:{investment_plan_id:t.id}}),label:"Edit",icon:"pi pi-file-edit",size:"small",fluid:""},null,8,["onClick"]),r(P,{id:t.id,onDelete:h},null,8,["id"])])])]),_:2},1032,["header"]))),128))])])):D("",!0)])])]}),_:1})}}});export{ge as default};
