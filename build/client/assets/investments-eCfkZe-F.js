import{t as V,_ as B}from"./vue-layout.vue_vue_type_script_setup_true_lang-BNFQYZFa.js";import{_ as Y}from"./VPaginator.vue_vue_type_script_setup_true_lang-BpSAoCku.js";import{s as j,a as q}from"./index-5MJVKUv_.js";import{s as z}from"./index-FZwsz_b6.js";import{_ as K}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-CPslCPqh.js";import{d as F,h as m,j as c,V as G,X as Q,c as _,w as r,a as o,q as a,b as W,e as X,v as n,N as H,p as g,x as y,U as J,o as v}from"./main-DbwiCszp.js";import{_ as Z}from"./VCard.vue_vue_type_script_setup_true_lang-7nJJ2y1E.js";import{s as ee}from"./index-C9xlOZnF.js";import{$ as te}from"./use-fetch-CkegAda4.js";import{u as se}from"./use-swrv-DVUkzGGN.js";import{t as ae}from"./investment-tier-C6RGqzcN.js";import"./index-TDOKOudS.js";import"./index-DeLv1j-i.js";import"./index-BxwU-vK-.js";import"./index-55yS1M7a.js";import"./index-CVVhXnti.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-D-TZBpbX.js";const oe={class:"flex flex-col md:flex-row gap-2 justify-between"},ne={class:"flex items-end gap-1 flex-wrap"},le={class:"flex gap-1 flex-col"},re={class:"flex gap-1 flex-col"},ie={class:"mt-2 md:h-[calc(100dvh-10rem)]"},me={key:2,class:"h-full w-full"},de={class:"w-full overflow-auto md:max-h-[calc(100dvh-16rem)]"},Ce=F({__name:"investments",setup(ue){const f=m(0),d=Q,x=c(()=>f.value*d),h=G(),{user_id:L}=h.currentRoute.value.query,D=m(["ALL","OPEN","CLOSED","PAUSED","TERMINATED"]),u=m("OPEN"),p=m("ALL"),E=m(["ALL",...ae.map(e=>e.toUpperCase())]),T=c(()=>{const e=new URLSearchParams;return e.set("take",d.toString()),e.set("skip",x.value.toString()),e.set("sort","createdAt,DESC"),L&&e.set("where",`userId,${L}`),u.value!=="ALL"&&e.append("where",`investmentStatus,${u.value}`),p.value!=="ALL"&&e.append("where",`investmentTier,${V(p.value)}`),e.toString()}),{isLoading:$,data:i,error:S,mutate:b}=se(()=>`/api/admins/me/investments?${T.value}`,te),C=c(()=>{var e;return((e=i.value)==null?void 0:e.investments.length)||0}),A=c(()=>{var e;return!!((e=i.value)!=null&&e.investments)&&i.value.investments.length<d});function N(e){return e==="OPEN"?"success":e==="CLOSED"?"info":e==="PAUSED"?"warn":"danger"}return(e,s)=>{const w=ee,k=Z,U=H,P=K,l=j,I=z,M=q,O=Y,R=B;return v(),_(R,{name:"admin"},{default:r(()=>[o("div",null,[a(k,{class:"py-2"},{default:r(()=>[o("div",oe,[s[7]||(s[7]=o("h1",{class:"text-lg font-semibold text-primary-500"},"Investments",-1)),o("div",ne,[o("div",le,[s[5]||(s[5]=o("label",{class:"text-xs text-mute font-semibold"},"Status",-1)),a(w,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),options:D.value,size:"small",class:"py-0"},null,8,["modelValue","options"])]),o("div",re,[s[6]||(s[6]=o("label",{class:"text-xs text-mute font-semibold"},"Tier",-1)),a(w,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),options:E.value,size:"small",class:"py-0"},null,8,["modelValue","options"])])])])]),_:1}),o("div",ie,[n($)?(v(),_(U,{key:0})):n(S)?(v(),_(P,{key:1,error:n(S),"should-retry":"",onRetry:s[2]||(s[2]=t=>n(b)()),closable:""},null,8,["error"])):n(i)?(v(),W("div",me,[o("div",de,[a(M,{value:n(i).investments,class:"text-sm min-w-[60rem]",selectionMode:"single",dataKey:"id",metaKeySelection:!1,onRowClick:s[3]||(s[3]=t=>{n(h).push({name:"admin-investment-item",params:{investment_id:t.data.id}})})},{default:r(()=>[a(l,{header:"S/N",style:{"min-width":"4rem"}},{body:r(({index:t})=>[g(y(t+1+x.value)+") ",1)]),_:1}),a(l,{field:"investmentName",header:"Investment"}),a(l,{field:"investmentTier",header:"Tier"}),a(l,{header:"Status"},{body:r(({data:t})=>[a(I,{class:"text-xs font-semibold",severity:N(t.investmentStatus),value:n(V)(t.investmentStatus)},null,8,["severity","value"])]),_:1}),a(l,{field:"user.name",header:"User"}),a(l,{field:"amount",header:"Amount"},{body:r(({data:t})=>[g(" $"+y(t.initialDeposit.toLocaleString()),1)]),_:1}),a(l,{field:"duration",header:"Duration (days)"}),a(l,{field:"daysCompleted",header:"Days Completed (days)"}),a(l,{header:"Created On"},{body:r(({data:t})=>[g(y(n(J)(new Date(t.createdAt),"ddd, DD MMM, YYYY hh:mm aa")),1)]),_:1})]),_:1},8,["value"])]),a(O,{allLoaded:A.value,length:C.value,rows:n(d),page:f.value,"onUpdate:page":s[4]||(s[4]=t=>f.value=t)},null,8,["allLoaded","length","rows","page"])])):X("",!0)])])]),_:1})}}});export{Ce as default};
