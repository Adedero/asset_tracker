import{_ as T,j as E}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{s as R}from"./index-BXAGMbEd.js";import{s as U}from"./index-Drofbpnb.js";import{_ as D}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{d as z,Y as A,V as I,h as L,k as M,i as Q,j as P,c as p,w as b,a as t,q as i,x as Y,s as G,v as a,b as H,e as J,N as K,p as f,o as r}from"./main-CE88ee4Q.js";import{_ as O}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{u as w}from"./use-fetch-CNl_4VEC.js";import"./index-wutX35Rh.js";import"./index-BPNPmUFq.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-0_DS-cBL.js";const W={class:"flex items-center gap-2 justify-between"},X={class:"font-semibold text-primary-500 text-lg"},Z={class:"mt-2 md:h-[calc(100dvh-9rem)]"},ee={key:2,class:"h-full w-full overflow-y-auto"},te={class:"grid md:grid-cols-2 gap-4"},se={class:"grid"},ae={class:"grid"},oe={class:"md:col-span-2"},ge=z({__name:"faq-item",setup(le){const u=I(),_=A(),o=u.currentRoute.value.params.faq_id?u.currentRoute.value.params.faq_id.toString():void 0,{isFetching:k,error:d,data:m,execute:v}=w(()=>`/api/admins/me/faqs/${o}`,{immediate:!1}).get().json(),s=L({});M(async()=>{o&&(await v(),!(d.value||!m.value)&&(s.value=m.value.faq))}),Q(()=>s.value.title,n=>{s.value.slug=E(n)});const $=P(()=>{const{title:n,slug:e,description:c}=s.value;return!n||!e||!c}),{isFetching:g,error:x,data:y,execute:F}=w(()=>o?`/api/admins/me/faqs/${o}`:"/api/admins/me/faqs",{immediate:!1})[o?"put":"post"](s).json(),h=async()=>{if(await F(),x.value||!y.value){_.add({severity:"error",summary:"Error",detail:x.value.message,life:6e3});return}if(!o){u.push({name:"admin-faq"});return}_.add({severity:"success",summary:"Success",detail:y.value.message||"FAQ item updated successfully",life:3e3})};return(n,e)=>{const c=G,N=O,j=K,B=D,V=U,C=R,S=T;return r(),p(S,{name:"admin"},{default:b(()=>{var q;return[t("div",null,[i(N,{class:"py-2"},{default:b(()=>[t("div",W,[t("p",X,Y(s.value.title??"New FAQ"),1),i(c,{onClick:h,label:"Save",icon:"pi pi-save",size:"small",loading:a(g),disabled:a(g)||$.value},null,8,["loading","disabled"])])]),_:1}),t("div",Z,[a(k)?(r(),p(j,{key:0})):a(d)?(r(),p(B,{key:1,error:a(d),"should-retry":"",onRetry:e[0]||(e[0]=l=>a(v)())},null,8,["error"])):a(o)&&((q=a(m))!=null&&q.faq)||!a(o)&&s.value?(r(),H("div",ee,[t("div",te,[t("div",se,[e[4]||(e[4]=t("label",{class:"text-mute text-sm font-semibold"},[f(" Title "),t("span",{class:"text-red-500"},"*")],-1)),i(V,{modelValue:s.value.title,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.title=l),fluid:""},null,8,["modelValue"])]),t("div",ae,[e[5]||(e[5]=t("label",{class:"text-mute text-sm font-semibold"},[f(" Slug "),t("span",{class:"text-red-500"},"*")],-1)),i(V,{modelValue:s.value.slug,"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.slug=l),fluid:""},null,8,["modelValue"])]),t("div",oe,[e[6]||(e[6]=t("label",{class:"text-mute text-sm font-semibold"},[f(" Description "),t("span",{class:"text-red-500"},"*")],-1)),i(C,{modelValue:s.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.description=l),fluid:"",rows:"14","auto-resize":""},null,8,["modelValue"])])])])):J("",!0)])])]}),_:1})}}});export{ge as default};
