import{_ as Y,d as U,s as q,a as E}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{s as F}from"./index-Drofbpnb.js";import{_ as j}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{s as z}from"./index-Cf5x4JsD.js";import{d as K,y as O,j as W,c as f,w as l,a as s,q as n,Z,v as a,n as H,x as c,b as g,e as p,N as J,$ as Q,p as D,U as X,F as tt,f as st,o as r}from"./main-CE88ee4Q.js";import{_ as et}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{_ as at}from"./VNavbar.vue_vue_type_script_setup_true_lang-GcHfqelS.js";import{$ as ot}from"./use-fetch-CNl_4VEC.js";import{u as nt}from"./use-swrv-ttgJgnvy.js";import"./index-wutX35Rh.js";import"./index-BPNPmUFq.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-0_DS-cBL.js";const rt={class:"h-full"},it={class:"flex flex-wrap md:flex-nowrap justify-end items-center gap-2"},lt={class:"text-right"},dt={class:"text-right"},ut={class:"text-emerald-500 font-semibold text-lg md:text-2xl leading-5"},mt={class:"mt-2 overflow-y-auto md:h-[calc(100dvh-9rem)]"},ct={key:1,class:"w-full max-w-[28rem]"},ft={key:2},pt={key:0},_t={class:"grid gap-2 items-start md:grid-cols-7 lg:grid-cols-5"},vt={class:"grid gap-2 md:col-span-3 lg:col-span-2"},gt={class:"flex items-center gap-1"},xt={class:"text-right"},Ct={class:"text-2xl font-semibold"},Dt={class:"flex items-center gap-1"},yt={class:"text-right"},ht={class:"text-2xl font-semibold"},bt={class:"flex items-center gap-1"},St={class:"text-right"},Ut={class:"text-2xl font-semibold"},kt={class:"text-right"},Bt={class:"text-2xl font-semibold"},Gt={class:"text-sm text-slate-500"},At={key:0},$t={class:"font-semibold"},Pt={key:1},Nt={class:"font-semibold"},Vt={class:"text-xs font-normal"},wt={class:"md:col-span-4 lg:col-span-3"},It={class:"text-right text-3xl font-semibold"},Lt={class:"mt-2 grid gap-2"},Rt={class:"grid gap-2 md:grid-cols-6"},Tt={class:"md:col-span-3"},Mt={class:"md:col-span-3"},Yt={class:"md:col-span-6"},qt={class:"md:col-span-3"},Et={class:"md:col-span-3"},Ft={class:"md:col-span-3"},jt={class:"md:col-span-3"},zt={key:1},is=K({__name:"gift-card-validation-report",setup(Kt){const I=O().params.transaction_id.toString(),{isLoading:L,data:o,error:k,mutate:R}=nt(()=>`/api/users/me/transactions/${I}`,ot);function b(d){var t,i;return(i=(t=o.value)==null?void 0:t.transaction.giftCardData)==null?void 0:i.cards.filter(u=>u.currency===d).length}const T=W(()=>{var d,t,i;return(((d=o.value)==null?void 0:d.transaction.amountInUSD)||0)>=(((i=(t=o.value)==null?void 0:t.transaction.giftCardData)==null?void 0:i.totalInUSD)||0)});function _(d){var t,i;return(i=(t=o.value)==null?void 0:t.transaction.giftCardData)==null?void 0:i.cards.reduce((u,m)=>m.currency===d?u+m.amount:u,0)}function B(){var t,i;if(!((t=o.value)!=null&&t.transaction.giftCardData))return 0;const{transaction:d}=o.value;return(i=d.giftCardData)==null?void 0:i.cards.reduce((u,m)=>{var y,x;return m.currency==="USD"?u+m.amount:m.currency==="CAD"?u+m.amount/(((y=d.giftCardData)==null?void 0:y.rates.CAD)||1):m.currency==="GBP"?u+m.amount/(((x=d.giftCardData)==null?void 0:x.rates.GBP)||1):u},0)}return(d,t)=>{const i=q,u=at,m=J,y=et,x=Q,S=z,C=j,G=E,v=F,M=Y;return r(),f(M,{name:"user"},{default:l(()=>{var A;return[s("div",rt,[n(u,null,Z({_:2},[a(o)?{name:"right",fn:l(()=>{var e;return[s("div",it,[s("div",lt,[t[1]||(t[1]=s("small",{class:"text-slate-500"},"Deposited",-1)),s("p",{class:H(`font-semibold text-lg md:text-2xl leading-5 ${T.value?"text-emerald-500":"text-red-500"}`)},c(a(U).format(a(o).transaction.amountInUSD)),3)]),n(i,{layout:"vertical"}),s("div",dt,[t[2]||(t[2]=s("small",{class:"text-slate-500"},"Requested",-1)),s("p",ut,c(a(U).format(((e=a(o).transaction.giftCardData)==null?void 0:e.totalInUSD)||B()||0)),1)])])]}),key:"0"}:void 0]),1024),s("div",mt,[a(L)?(r(),f(m,{key:0})):a(k)?(r(),g("div",ct,[n(y,{error:a(k),"should-retry":"",onRetry:t[0]||(t[0]=e=>a(R)())},null,8,["error"])])):a(o)?(r(),g("div",ft,[a(o).transaction.transactionStatus==="SUCCESSFUL"?(r(),g("div",pt,[s("div",_t,[s("div",vt,[_("USD")?(r(),f(C,{key:0},{header:l(()=>[s("div",gt,[t[3]||(t[3]=s("p",{class:"text-slate-500 font-semibold"},"US Gift Cards",-1)),n(x,{severity:"danger",value:b("USD")},null,8,["value"])])]),default:l(()=>{var e;return[s("div",xt,[n(S,{value:"USD"}),s("p",Ct,c(((e=_("USD"))==null?void 0:e.toLocaleString())||0),1)])]}),_:1})):p("",!0),_("CAD")?(r(),f(C,{key:1,header:"Canadian Gift Cards"},{header:l(()=>[s("div",Dt,[t[4]||(t[4]=s("p",{class:"text-slate-500 font-semibold"},"Canadian Gift Cards",-1)),n(x,{severity:"danger",value:b("CAD")},null,8,["value"])])]),default:l(()=>{var e;return[s("div",yt,[n(S,{value:"CAD"}),s("p",ht,c(((e=_("CAD"))==null?void 0:e.toLocaleString())||0),1)])]}),_:1})):p("",!0),_("GBP")?(r(),f(C,{key:2,header:"UK Gift Cards"},{header:l(()=>[s("div",bt,[t[5]||(t[5]=s("p",{class:"text-slate-500 font-semibold"},"UK Gift Cards",-1)),n(x,{severity:"danger",value:b("GBP")},null,8,["value"])])]),default:l(()=>{var e;return[s("div",St,[n(S,{value:"GBP"}),s("p",Ut,c(((e=_("GBP"))==null?void 0:e.toLocaleString())||0),1)])]}),_:1})):p("",!0),n(C,{header:"Requested Total (USD)"},{default:l(()=>{var e,h,$,P,N,V,w;return[s("div",kt,[s("p",Bt,c(a(U).format(((e=a(o).transaction.giftCardData)==null?void 0:e.totalInUSD)||B()||0)),1)]),(h=a(o).transaction.giftCardData)!=null&&h.rates.CAD||($=a(o).transaction.giftCardData)!=null&&$.rates.GBP?(r(),f(i,{key:0})):p("",!0),s("div",Gt,[(P=a(o).transaction.giftCardData)!=null&&P.rates.CAD?(r(),g("div",At,[t[6]||(t[6]=s("span",{class:"font-medium"},"1 USD",-1)),t[7]||(t[7]=D(" = ")),s("span",$t," CAD "+c(a(o).transaction.giftCardData.rates.CAD),1)])):p("",!0),(N=a(o).transaction.giftCardData)!=null&&N.rates.GBP?(r(),g("div",Pt,[t[8]||(t[8]=s("span",{class:"font-medium"},"1 USD",-1)),t[9]||(t[9]=D(" = ")),s("span",Nt," GBP "+c(a(o).transaction.giftCardData.rates.GBP),1)])):p("",!0)]),(V=a(o).transaction.giftCardData)!=null&&V.rates.CAD||(w=a(o).transaction.giftCardData)!=null&&w.rates.GBP?(r(),f(i,{key:1})):p("",!0),_("CAD")||_("GBP")?(r(),f(G,{key:2,size:"small"},{default:l(()=>[s("p",Vt,[t[10]||(t[10]=D(" The rates above were based on the market rates at the time of the creation of the deposit request : ")),s("b",null,c(a(X)(a(o).transaction.createdAt,"MMM DD, YYYY hh:mm:ss aa")),1),t[11]||(t[11]=D(". ")),t[12]||(t[12]=s("br",null,null,-1)),t[13]||(t[13]=D(" Please note that at the time of validating the gift cards, the rates may have changed. "))])]),_:1})):p("",!0)]}),_:1})]),s("div",wt,[n(C,{header:"Your Gift Cards"},{default:l(()=>{var e;return[s("p",It,c((e=a(o).transaction.giftCardData)==null?void 0:e.cards.length),1)]}),_:1}),s("div",Lt,[(r(!0),g(tt,null,st(((A=a(o).transaction.giftCardData)==null?void 0:A.cards)||[],(e,h)=>(r(),f(C,{header:`${h+1}. ${e.currency} Card`,class:"border"},{default:l(()=>[s("div",Rt,[s("div",Tt,[t[14]||(t[14]=s("span",{class:"text-sm font-medium text-slate-500"},"Type",-1)),n(v,{value:e.type,fluid:"",disabled:""},null,8,["value"])]),s("div",Mt,[t[15]||(t[15]=s("span",{class:"text-sm font-medium text-slate-500"},"Country",-1)),n(v,{value:e.country,fluid:"",disabled:""},null,8,["value"])]),s("div",Yt,[t[16]||(t[16]=s("span",{class:"text-sm font-medium text-slate-500"},"Card Number",-1)),n(v,{value:e.cardNumber,fluid:"",disabled:""},null,8,["value"])]),s("div",qt,[t[17]||(t[17]=s("span",{class:"text-sm font-medium text-slate-500"},"PIN/Security Code",-1)),n(v,{value:e.pin,fluid:"",disabled:""},null,8,["value"])]),s("div",Et,[t[18]||(t[18]=s("span",{class:"text-sm font-medium text-slate-500"},"Amount/Balance",-1)),n(v,{value:e.amount,fluid:"",disabled:""},null,8,["value"])]),s("div",Ft,[t[19]||(t[19]=s("span",{class:"text-sm font-medium text-slate-500"},"Amount Retrieved",-1)),n(v,{value:e.amountRetrieved,fluid:"",disabled:""},null,8,["value"])]),s("div",jt,[t[20]||(t[20]=s("span",{class:"text-sm font-medium text-slate-500"},"Rate Used",-1)),n(v,{value:e.rateUsed,fluid:"",disabled:""},null,8,["value"])])])]),_:2},1032,["header"]))),256))])])])])):(r(),g("div",zt,[n(G,null,{default:l(()=>t[21]||(t[21]=[D(" No report exists for this gift card transaction because it has not yet been approved. ")])),_:1,__:[21]})]))])):p("",!0)])])]}),_:1})}}});export{is as default};
