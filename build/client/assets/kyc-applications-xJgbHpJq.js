import{_ as F,t as G}from"./vue-layout.vue_vue_type_script_setup_true_lang-BNFQYZFa.js";import{_ as K}from"./VPaginator.vue_vue_type_script_setup_true_lang-BpSAoCku.js";import{s as j,a as q}from"./index-5MJVKUv_.js";import{s as z}from"./index-FZwsz_b6.js";import{_ as O}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-CPslCPqh.js";import{d as Q,h as d,j as u,X as W,c as p,w as l,a as o,q as a,b as _,e as X,v as n,N as H,p as S,x as h,ah as J,ap as Z,U as ee,o as r}from"./main-DbwiCszp.js";import{_ as te}from"./VCard.vue_vue_type_script_setup_true_lang-7nJJ2y1E.js";import{s as se}from"./index-C9xlOZnF.js";import{s as oe}from"./index-CVVhXnti.js";import{$ as ae}from"./use-fetch-CkegAda4.js";import{u as le}from"./use-swrv-DVUkzGGN.js";import{I as ne}from"./iconify-D-TZBpbX.js";import"./index-TDOKOudS.js";import"./index-DeLv1j-i.js";import"./index-BxwU-vK-.js";import"./index-55yS1M7a.js";import"./bundle-mjs-CLJs87Zn.js";const re={class:"flex flex-col md:flex-row gap-2 justify-between"},ie={class:"flex items-start gap-5 flex-wrap"},ce={class:"translate-y-1 flex gap-1 items-center"},ue={class:"flex items-end gap-1 flex-wrap"},me={class:"flex gap-1 flex-col"},de={class:"mt-2 md:h-[calc(100dvh-10rem)]"},pe={key:2},_e={class:"h-full w-full"},fe={class:"w-full overflow-auto md:max-h-[calc(100dvh-15rem)]"},ve={key:0,class:"w-8 aspect-square overflow-hidden rounded-full"},ye=["src","alt"],he={class:"text-xs font-semibold text-red-500"},ge={key:0},xe={key:1},Ye=Q({__name:"kyc-applications",setup(we){const f=d(0),m=W,g=u(()=>f.value*m),I=d(["PENDING","VERIFIED","UNVERIFIED"]),v=d("PENDING"),V=u(()=>{const t=new URLSearchParams;return t.set("take",m.toString()),t.set("skip",g.value.toString()),t.set("sort","kycSubmittedAt,desc"),t.set("where",`kycStatus,${v.value}`),t.toString()}),{isLoading:D,data:i,error:x,mutate:N}=le(()=>`/api/admins/me/accounts?${V.value}`,ae),y=d(!1),w=u(()=>{var t;return(t=i.value)!=null&&t.accounts?y.value?i.value.accounts:i.value.accounts.filter(s=>s.user&&s.user.role!=="ADMIN"):null}),E=u(()=>{var t;return((t=i.value)==null?void 0:t.accounts.length)||0}),$=u(()=>{var t;return!!((t=i.value)!=null&&t.accounts)&&i.value.accounts.length<m});function T(t){return t==="VERIFIED"?"success":t==="PENDING"?"warn":"danger"}return(t,s)=>{const C=oe,L=se,A=te,M=H,R=O,c=j,P=z,U=q,Y=K,B=F;return r(),p(B,{name:"admin"},{default:l(()=>[o("div",null,[a(A,{class:"py-2"},{default:l(()=>[o("div",re,[o("div",ie,[s[6]||(s[6]=o("h1",{class:"text-lg font-semibold text-primary-500"},"KYC",-1)),o("div",ce,[a(C,{binary:"",modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=e=>y.value=e)},null,8,["modelValue"]),s[5]||(s[5]=o("label",{class:"text-xs text-mute font-semibold"},"Show admins",-1))])]),o("div",ue,[o("div",me,[s[7]||(s[7]=o("label",{class:"text-xs text-mute font-semibold"},"Status",-1)),a(L,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),options:I.value,size:"small",class:"py-0"},null,8,["modelValue","options"])])])])]),_:1}),o("div",de,[n(D)?(r(),p(M,{key:0})):n(x)?(r(),p(R,{key:1,error:n(x),"should-retry":"",onRetry:s[2]||(s[2]=e=>n(N)())},null,8,["error"])):w.value?(r(),_("div",pe,[o("div",_e,[o("div",fe,[a(U,{value:w.value,class:"text-sm",selectionMode:"single",dataKey:"id",metaKeySelection:!1,onRowClick:s[3]||(s[3]=e=>t.$router.push({name:"admin-kyc-review",params:{account_id:e.data.id}}))},{default:l(()=>[a(c,{header:"S/N",style:{"min-width":"4rem"}},{body:l(({index:e})=>[S(h(e+1+g.value)+") ",1)]),_:1}),a(c,null,{body:l(({data:e})=>{var b,k;return[(b=e.user)!=null&&b.image?(r(),_("div",ve,[o("img",{src:e.user.image,alt:(k=e.user)==null?void 0:k.name,class:"w-full h-full object-cover"},null,8,ye)])):(r(),p(n(ne),{key:1,icon:"ic:baseline-account-circle",style:{"font-size":"2rem"},class:"text-primary-500"}))]}),_:1}),a(c,{field:"user.name",header:"Name"},{body:l(({data:e})=>[o("p",null,[S(h(e.user.name)+" ",1),J(o("span",he," admin ",512),[[Z,e.user.role==="ADMIN"]])])]),_:1}),a(c,{header:"KYC Status"},{body:l(({data:e})=>[a(P,{class:"text-xs font-semibold",severity:T(e.kycStatus),value:n(G)(e.kycStatus)},null,8,["severity","value"])]),_:1}),a(c,{field:"kycIdType",header:"ID Type"}),a(c,{header:"Submitted On"},{body:l(({data:e})=>[e.kycSubmittedAt?(r(),_("p",ge,h(n(ee)(new Date(e.kycSubmittedAt),"ddd, DD MMM, YYYY hh:mm aa")),1)):(r(),_("p",xe,"Not submitted"))]),_:1})]),_:1},8,["value"])]),a(Y,{allLoaded:$.value,length:E.value,rows:n(m),page:f.value,"onUpdate:page":s[4]||(s[4]=e=>f.value=e)},null,8,["allLoaded","length","rows","page"])])])):X("",!0)])])]),_:1})}}});export{Ye as default};
