import{_ as F,t as V}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{_ as z}from"./VPaginator.vue_vue_type_script_setup_true_lang-d1R-1bBh.js";import{s as B,a as Y}from"./index-DXvl-esB.js";import{s as j}from"./index-Cf5x4JsD.js";import{_ as q}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{d as H,h as m,j as f,V as K,X as Q,c as x,w as r,a as s,q as o,b as v,e as X,v as n,N as J,p as g,x as d,n as Z,U as ee,o as i}from"./main-CE88ee4Q.js";import{_ as te}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{s as ae}from"./index-BGiSEDGv.js";import{$ as oe}from"./use-fetch-CNl_4VEC.js";import{u as se}from"./use-swrv-ttgJgnvy.js";import{I as ne}from"./iconify-0_DS-cBL.js";import"./index-DHTAa8Us.js";import"./index-Drofbpnb.js";import"./index-wutX35Rh.js";import"./index-BPNPmUFq.js";import"./index-B88Wmsvc.js";import"./bundle-mjs-CLJs87Zn.js";const re={class:"flex flex-col md:flex-row gap-2 justify-between"},le={class:"flex items-end gap-1 flex-wrap"},ie={class:"flex gap-1 flex-col"},ce={class:"flex gap-1 flex-col"},me={class:"mt-2 md:h-[calc(100dvh-11rem)]"},de={key:2,class:"w-full"},ue={class:"w-full overflow-auto md:max-h-[calc(100dvh-15.5rem)]"},pe={class:"text-sm font-medium"},_e={key:0},fe={key:1},ve={key:2},Ue=H({__name:"transactions",setup(ye){const y=m(0),u=Q,S=f(()=>y.value*u),T=K(),{user_id:L}=T.currentRoute.value.query,D=m(["ALL","PENDING","SUCCESSFUL","FAILED"]),p=m("PENDING"),E=m(["ALL","DEPOSIT","WITHDRAWAL","INVESTMENT","PROFIT"]),_=m("ALL"),b=f(()=>{const t=new URLSearchParams;return t.set("take",u.toString()),t.set("skip",S.value.toString()),t.set("sort","createdAt,DESC"),L&&t.set("where",`userId,${L}`),p.value!=="ALL"&&t.append("where",`transactionStatus,${p.value}`),_.value!=="ALL"&&t.append("where",`transactionType,${_.value}`),t.toString()}),{isLoading:C,data:c,error:h,mutate:N}=se(()=>`/api/admins/me/transactions?${b.value}`,oe),$=f(()=>{var t;return((t=c.value)==null?void 0:t.transactions.length)||0}),A=f(()=>{var t;return!!((t=c.value)!=null&&t.transactions)&&c.value.transactions.length<u});function w(t){return t==="DEPOSIT"?{icon:"arrow-circle-down",color:"text-primary-500"}:t==="WITHDRAWAL"?{icon:"arrow-circle-up",color:"text-red-500"}:t==="INVESTMENT"?{icon:"spa",color:"text-green-500"}:{icon:"payments",color:"text-green-500"}}function k(t){return t==="SUCCESSFUL"?"success":t==="PENDING"?"warn":"danger"}return(t,a)=>{const I=ae,U=te,M=J,P=q,l=B,R=j,W=Y,G=z,O=F;return i(),x(O,{name:"admin"},{default:r(()=>[s("div",null,[o(U,{class:"py-2"},{default:r(()=>[s("div",re,[a[7]||(a[7]=s("h1",{class:"text-lg font-semibold text-primary-500"},"Transactions",-1)),s("div",le,[s("div",ie,[a[5]||(a[5]=s("label",{class:"text-xs text-mute font-semibold"},"Status",-1)),o(I,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),options:D.value,size:"small",class:"py-0"},null,8,["modelValue","options"])]),s("div",ce,[a[6]||(a[6]=s("label",{class:"text-xs text-mute font-semibold"},"Type",-1)),o(I,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value=e),options:E.value,size:"small",class:"py-0"},null,8,["modelValue","options"])])])])]),_:1}),s("div",me,[n(C)?(i(),x(M,{key:0})):n(h)?(i(),x(P,{key:1,error:n(h),"should-retry":"",onRetry:a[2]||(a[2]=e=>n(N)())},null,8,["error"])):n(c)?(i(),v("div",de,[s("div",ue,[o(W,{value:n(c).transactions,class:"text-sm min-w-[40rem]",selectionMode:"single",dataKey:"id",metaKeySelection:!1,onRowClick:a[3]||(a[3]=e=>n(T).push({name:"admin-transaction-item",params:{transaction_id:e.data.id}}))},{default:r(()=>[o(l,{header:"S/N"},{body:r(({index:e})=>[g(d(e+1+S.value)+") ",1)]),_:1}),o(l,{header:"Type"},{body:r(({data:e})=>[s("div",{class:Z(["flex items-center gap-1",w(e.transactionType).color])},[o(n(ne),{style:{"font-size":"20px"},icon:`ic:baseline-${w(e.transactionType).icon}`},null,8,["icon"]),s("p",pe,d(n(V)(e.transactionType)),1)],2)]),_:1}),o(l,{field:"user.name",header:"User"}),o(l,{field:"amount",header:"Amount"},{body:r(({data:e})=>[g(" $"+d(e.amountInUSD.toLocaleString()),1)]),_:1}),o(l,{header:"Medium"},{body:r(({data:e})=>[e.isWireTransfer?(i(),v("p",_e,"Wire Transfer")):e.isGiftCard?(i(),v("p",fe,"Gift Card")):(i(),v("p",ve,d(e.currency),1))]),_:1}),o(l,{header:"Status"},{body:r(({data:e})=>[o(R,{class:"text-xs font-semibold",severity:k(e.transactionStatus),value:n(V)(e.transactionStatus)},null,8,["severity","value"])]),_:1}),o(l,{header:"Created On"},{body:r(({data:e})=>[g(d(n(ee)(new Date(e.createdAt),"ddd, DD MMM, YYYY hh:mm aa")),1)]),_:1})]),_:1},8,["value"])]),o(G,{allLoaded:A.value,length:$.value,rows:n(u),page:y.value,"onUpdate:page":a[4]||(a[4]=e=>y.value=e)},null,8,["allLoaded","length","rows","page"])])):X("",!0)])])]),_:1})}}});export{Ue as default};
