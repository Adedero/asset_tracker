import{s as R,a as se,_ as te,t as le}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{d as E,Y as N,a1 as ae,b as k,a as e,r as j,q as n,s as T,v as l,o as v,h as z,D as Y,w as U,c as A,x as w,j as Z,e as F,V as ne,t as oe,N as ie,U as J}from"./main-CE88ee4Q.js";import{u as I,$ as re}from"./use-fetch-CNl_4VEC.js";import{s as L}from"./index-CFcbhqS3.js";import{s as de}from"./index-B88Wmsvc.js";import{s as ue}from"./index-BGiSEDGv.js";import{s as ee}from"./index-DHTAa8Us.js";import{s as me}from"./index-BXAGMbEd.js";import{s as ce}from"./index-Drofbpnb.js";import{o as pe,s as fe}from"./types-CPE1WPKY.js";import{_ as ve}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{_ as be}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{_ as ge}from"./user-manager.vue_vue_type_script_setup_true_lang-Chv3gHlv.js";import{u as xe}from"./use-swrv-ttgJgnvy.js";import{I as ye}from"./iconify-0_DS-cBL.js";import"./index-BPNPmUFq.js";import"./index-wutX35Rh.js";import"./bundle-mjs-CLJs87Zn.js";import"./index-B9cPqbKC.js";import"./index-D1ity6C8.js";import"./VFileUploader.vue_vue_type_script_setup_true_lang-DHTQRJoi.js";import"./country-by-name-Di7sd6fA.js";import"./login.schema-BTravW_w.js";import"./v4-C6aID195.js";const we=E({__name:"user-deleter",props:{userId:{}},emits:["remove"],setup(i,{emit:d}){const b=d,f=N(),{isFetching:t,error:c,data:o,execute:p}=I(`/api/admins/me/users/${i.userId}`,{immediate:!1}).delete().json(),h=async()=>{if(await p(),c.value||!o.value){f.add({severity:"error",summary:"Failed",detail:c.value.message,life:6e3});return}b("remove"),f.add({severity:"success",summary:"Done",detail:"User account deleted",life:3e3})},x=ae(),m=()=>{x.require({message:"Are you sure you want to delete this uers's account. This will also delete their investment and transaction records, and cannot be undone.",header:"Delete Account",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{h()}})};return(_,g)=>{const s=T;return v(),k("div",null,[e("div",{onClick:m,class:"cursor-pointer"},[j(_.$slots,"default",{loading:l(t)},()=>[n(s,{loading:l(t),label:"Delete Account",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",fluid:"",outlined:"",severity:"danger"},null,8,["loading"])])])])}}}),_e={class:"grid gap-4"},he={class:"grid"},ke={class:"flex flex-wrap items-center gap-2 justify-between"},$e={class:"text-xs text-mute mt-1"},ze={key:1},Be={class:"mt-2 grid grid-cols-2 gap-2"},Ve=E({__name:"user-unban-editor",props:{user:{}},emits:["ban"],setup(i,{emit:d}){const b=d,f=N(),t=z(!1),c=z(!1),o=z({unfreezeInvestments:!1}),{isFetching:p,error:h,data:x,execute:m}=I(`/api/admins/me/users/${i.user.id}/unban`,{immediate:!1}).put(o).json(),_=async()=>{if(await m(),h.value||!x.value){f.add({severity:"error",summary:"Failed",detail:h.value.message});return}b("ban"),f.add({severity:"success",summary:"Done",detail:x.value.message,life:3e3}),t.value=!1},g=()=>{o.value={unfreezeInvestments:!0},c.value=!1,t.value=!1};return(s,r)=>{const a=T,y=L,$=R,u=Y;return v(),k("div",null,[e("div",{onClick:r[0]||(r[0]=B=>t.value=!0),class:"cursor-pointer"},[j(s.$slots,"default",{loading:l(p)},()=>[n(a,{loading:l(p),label:"Unban",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",fluid:"",outlined:"",severity:"warn"},null,8,["loading"])])]),n(u,{visible:t.value,"onUpdate:visible":r[3]||(r[3]=B=>t.value=B),modal:"",header:"Ban User",class:"max-w-96"},{default:U(()=>[e("div",null,[e("div",_e,[r[6]||(r[6]=e("p",null,"Are you sure you want to unban this user?",-1)),e("div",he,[e("div",ke,[r[4]||(r[4]=e("label",{class:"text-mute text-sm font-semibold"},"Unfreeze Investments",-1)),n(y,{modelValue:o.value.unfreezeInvestments,"onUpdate:modelValue":r[1]||(r[1]=B=>o.value.unfreezeInvestments=B)},null,8,["modelValue"])]),e("small",$e," Unfreeze any of "+w(s.user?`${s.user.name}'s`:"this user's")+" investments that were frozen when they were banned. ",1)]),c.value?(v(),k("div",ze,[n($),r[5]||(r[5]=e("p",{class:"text-sm text-red-500 font-medium"},"Are you sure you want to proceed?",-1)),e("div",Be,[n(a,{onClick:g,size:"small",label:"Cancel",icon:"pi pi-times",severity:"secondary"}),n(a,{onClick:_,loading:l(p),size:"small",label:"Proceed",icon:"pi pi-check",severity:"danger"},null,8,["loading"])])])):(v(),A(a,{key:0,onClick:r[2]||(r[2]=B=>c.value=!0),loading:l(p),label:l(p)?"Loading...":"Submit",fluid:""},null,8,["loading","label"]))])])]),_:1},8,["visible"])])}}});function Q(i,d,b=new Date){if(typeof i!="number"||isNaN(i))throw new Error("Amount must be a valid number");if(typeof d!="string")throw new Error("Time frame must be a string");if(!(b instanceof Date)||isNaN(b.getTime()))throw new Error("Base date must be a valid Date object");const f=new Date(b.getTime()),t=d.toLowerCase().replace(/s$/,""),c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3};switch(t){case"second":case"minute":case"hour":case"day":case"week":f.setTime(f.getTime()+i*c[t]);break;case"month":f.setMonth(f.getMonth()+i);break;case"year":f.setFullYear(f.getFullYear()+i);break;default:throw new Error(`Unsupported time frame: ${d}. Supported: seconds, minutes, hours, days, weeks, months, years`)}return f}function X(i,d=new Date,b=null){if(!(i instanceof Date)||isNaN(i.getTime()))throw new Error("Target date must be a valid Date object");if(!(d instanceof Date)||isNaN(d.getTime()))throw new Error("Base date must be a valid Date object");const f=i.getTime()-d.getTime(),t=f<0,c=Math.abs(f);if(b){const a=b.toLowerCase().replace(/s$/,"");let y;switch(a){case"second":y=Math.round(c/1e3);break;case"minute":y=Math.round(c/(60*1e3));break;case"hour":y=Math.round(c/(60*60*1e3));break;case"day":y=Math.round(c/(24*60*60*1e3));break;case"week":y=Math.round(c/(7*24*60*60*1e3));break;case"month":const $=i.getFullYear()-d.getFullYear(),u=i.getMonth()-d.getMonth();y=Math.abs($*12+u);break;case"year":y=Math.abs(i.getFullYear()-d.getFullYear());break;default:throw new Error(`Unsupported preferred unit: ${b}`)}return{amount:t?-y:y,timeFrame:y===1?a:a+"s",isInPast:t,exact:!1}}const o=c/1e3,p=o/60,h=p/60,x=h/24,m=x/7,_=Math.abs(i.getFullYear()-d.getFullYear()),g=Math.abs((i.getFullYear()-d.getFullYear())*12+(i.getMonth()-d.getMonth()));let s,r;return _>=1&&x>=300?(s=Math.round(_),r=s===1?"year":"years"):g>=1&&x>=25?(s=Math.round(g),r=s===1?"month":"months"):m>=1&&x>=7?(s=Math.round(m),r=s===1?"week":"weeks"):x>=1?(s=Math.round(x),r=s===1?"day":"days"):h>=1?(s=Math.round(h),r=s===1?"hour":"hours"):p>=1?(s=Math.round(p),r=s===1?"minute":"minutes"):(s=Math.round(o),r=s===1?"second":"seconds"),{amount:t?-s:s,timeFrame:r,isInPast:t,exact:!0}}const Ce={fromNow:(i,d)=>Q(i,d),ago:(i,d)=>Q(-i,d),from:(i,d,b)=>Q(i,d,b),until:(i,d=null)=>X(i,new Date,d),since:(i,d=null)=>X(new Date,i,d),between:(i,d,b=null)=>X(i,d,b)},Ue={class:"grid gap-4"},De={class:"grid"},Me={class:"grid"},Ae={class:"flex items-center gap-2 justify-between"},Fe={class:"flex items-center gap-1 mt-2"},Se={class:"grid"},Ee={class:"flex flex-wrap items-center gap-2 justify-between"},Te={class:"text-xs text-mute mt-1"},Ne={key:1},je={class:"mt-2 grid grid-cols-2 gap-2"},Ie=E({__name:"user-ban-editor",props:{user:{}},emits:["ban"],setup(i,{emit:d}){const b=d,f=N(),t=z(!1),c=z(!1),o=z(!1),p=z({number:30,frame:"days"}),h=Z(()=>o.value?!m.value.banReason:!m.value.banReason||!p.value.number||!p.value.frame),x=z(["seconds","minutes","hours","days","weeks","months","years"]),m=z({banReason:"",banDuration:null,freezeInvestments:!0}),{isFetching:_,error:g,data:s,execute:r}=I(`/api/admins/me/users/${i.user.id}/ban`,{immediate:!1}).put(m).json(),a=async()=>{if(o.value?m.value.banDuration=null:m.value.banDuration=Ce.fromNow(p.value.number,p.value.frame),await r(),g.value||!s.value){f.add({severity:"error",summary:"Failed",detail:g.value.message});return}b("ban"),f.add({severity:"success",summary:"Done",detail:s.value.message||"User banned successfully",life:3e3}),t.value=!1},y=()=>{m.value={banReason:"",banDuration:null,freezeInvestments:!0},p.value={number:30,frame:"days"},o.value=!1,c.value=!1,t.value=!1};return($,u)=>{const B=T,M=me,D=ee,q=ue,G=de,H=L,W=R,O=Y;return v(),k("div",null,[e("div",{onClick:u[0]||(u[0]=V=>t.value=!0),class:"cursor-pointer"},[j($.$slots,"default",{loading:l(_)},()=>[n(B,{loading:l(_),label:"Ban",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",fluid:"",outlined:"",severity:"warn"},null,8,["loading"])])]),n(O,{visible:t.value,"onUpdate:visible":u[7]||(u[7]=V=>t.value=V),modal:"",header:"Ban User",class:"max-w-96"},{default:U(()=>[e("div",null,[e("div",Ue,[u[13]||(u[13]=e("p",null,"Are you sure you want to ban this user?",-1)),e("div",De,[u[8]||(u[8]=e("label",{class:"text-mute text-sm font-semibold"},"Enter the reason for the ban",-1)),n(M,{modelValue:m.value.banReason,"onUpdate:modelValue":u[1]||(u[1]=V=>m.value.banReason=V),rows:"3",class:"resize-none"},null,8,["modelValue"])]),e("div",Me,[e("div",null,[u[10]||(u[10]=e("label",{class:"text-mute text-sm font-semibold"},"Ban duration ",-1)),e("div",Ae,[n(D,{modelValue:p.value.number,"onUpdate:modelValue":u[2]||(u[2]=V=>p.value.number=V),"max-fraction-digits":2,size:"small",fluid:"",disabled:o.value},null,8,["modelValue","disabled"]),n(q,{modelValue:p.value.frame,"onUpdate:modelValue":u[3]||(u[3]=V=>p.value.frame=V),options:x.value,size:"small",fluid:"",disabled:o.value},null,8,["modelValue","options","disabled"])]),e("div",Fe,[n(G,{modelValue:o.value,"onUpdate:modelValue":u[4]||(u[4]=V=>o.value=V),binary:""},null,8,["modelValue"]),u[9]||(u[9]=e("span",{class:"text-red-500 text-sm font-medium"},"Ban indefinetly",-1))])])]),e("div",Se,[e("div",Ee,[u[11]||(u[11]=e("label",{class:"text-mute text-sm font-semibold"},"Freeze Investments",-1)),n(H,{modelValue:m.value.freezeInvestments,"onUpdate:modelValue":u[5]||(u[5]=V=>m.value.freezeInvestments=V)},null,8,["modelValue"])]),e("small",Te," Stop "+w($.user?`${$.user.name}'s`:"this user's")+" investments from receiving any profits for the duration of their ban. ",1)]),c.value?(v(),k("div",Ne,[n(W),u[12]||(u[12]=e("p",{class:"text-sm text-red-500 font-medium"},"Are you sure you want to proceed?",-1)),e("div",je,[n(B,{onClick:y,size:"small",label:"Cancel",icon:"pi pi-times",severity:"secondary"}),n(B,{onClick:a,loading:l(_),size:"small",label:"Proceed",icon:"pi pi-check",severity:"danger"},null,8,["loading"])])])):(v(),A(B,{key:0,onClick:u[6]||(u[6]=V=>c.value=!0),loading:l(_),label:l(_)?"Loading...":"Submit",fluid:"",disabled:h.value},null,8,["loading","label","disabled"]))])])]),_:1},8,["visible"])])}}}),Pe={class:"grid gap-2"},Ye={class:"flex items-center justify-between gap-2"},Re={class:"text-xs text-mute"},Le={class:"flex items-center gap-2 justify-end"},qe=E({__name:"user-password-resetter",props:{user:{}},setup(i){const d=N(),b=z(!1),f=z({password:"00000000",notify:!0}),{isFetching:t,error:c,data:o,execute:p}=I(`/api/admins/me/users/${i.user.id}/reset-password`,{immediate:!1}).put(f).json(),h=async()=>{if(await p(),c.value||!o.value){d.add({severity:"error",summary:"Failed",detail:c.value.message});return}d.add({severity:"success",summary:"Done",detail:"Password has been reset.",life:3e3}),b.value=!1};return(x,m)=>{const _=T,g=se,s=L,r=Y;return v(),k("div",null,[e("div",{onClick:m[0]||(m[0]=a=>b.value=!0),class:"cursor-pointer"},[j(x.$slots,"default",{loading:l(t)},()=>[n(_,{loading:l(t),label:"Reset Password",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",fluid:"",outlined:""},null,8,["loading"])])]),n(r,{visible:b.value,"onUpdate:visible":m[3]||(m[3]=a=>b.value=a),modal:"",header:"Reset Password",class:"max-w-96"},{default:U(()=>[e("div",Pe,[l(t)?(v(),A(g,{key:0,size:"small"},{default:U(()=>m[4]||(m[4]=[e("p",null,"Resetting password...",-1)])),_:1,__:[4]})):F("",!0),e("p",null,"Are you sure you want to reset "+w(x.user?x.user.name:"this user")+"'s password?",1),e("div",null,[e("div",Ye,[m[5]||(m[5]=e("label",{class:"text-sm font-medium text-mute"},"Notify user",-1)),n(s,{modelValue:f.value.notify,"onUpdate:modelValue":m[1]||(m[1]=a=>f.value.notify=a),disabled:l(t),size:"small"},null,8,["modelValue","disabled"])]),e("p",Re," Send an email to "+w(x.user?x.user.name:"this user")+" notifying them their password has been reset. ",1)]),e("div",Le,[n(_,{onClick:m[2]||(m[2]=a=>b.value=!1),label:"Cancel",severity:"secondary",outlined:""}),n(_,{onClick:h,label:"Proceed",loading:l(t),severity:"danger"},null,8,["loading"])])])]),_:1},8,["visible"])])}}}),Ge={class:"grid gap-4"},He={class:"font-semibold text-primary-500"},We={class:"grid"},Oe={class:"grid"},Ke={class:"flex flex-wrap items-center gap-2 justify-between"},Je={class:"grid"},Qe={class:"flex flex-wrap items-center gap-2 justify-between"},Xe={class:"text-xs text-mute mt-1"},Ze={key:1},es={class:"mt-2 grid grid-cols-2 gap-2"},ss=E({__name:"user-email-editor",props:{user:{}},emits:["update"],setup(i,{emit:d}){const b=d,f=N(),t=z(!1),c=z(!1),o=z({email:i.user.email,verified:!1,notify:!0}),{isFetching:p,error:h,data:x,execute:m}=I(`/api/admins/me/users/${i.user.id}/change-email`,{immediate:!1}).put(o).json(),_=async()=>{c.value=!1;const a=pe({email:fe({message:"Email is required"}).email({message:"Enter a valid email"})}).safeParse({email:o.value.email});if(!a.success){f.add({severity:"error",summary:"Failed",detail:a.error.errors[0].message,life:6e3});return}if(await m(),h.value||!x.value){f.add({severity:"error",summary:"Failed",detail:h.value.message});return}f.add({severity:"success",summary:"Done",detail:x.value.message||"User email updated successfully",life:3e3}),b("update",o.value.email,o.value.verified),t.value=!1},g=Z(()=>p.value||!o.value.email||o.value.email===i.user.email),s=()=>{c.value=!1,o.value={email:i.user.email,verified:!1,notify:!0},t.value=!1};return(r,a)=>{const y=T,$=ce,u=L,B=R,M=Y;return v(),k("div",null,[e("div",{onClick:a[0]||(a[0]=D=>t.value=!0),class:"cursor-pointer"},[j(r.$slots,"default",{},()=>[n(y,{label:"Change Email",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",fluid:"",outlined:""})])]),n(M,{visible:t.value,"onUpdate:visible":a[5]||(a[5]=D=>t.value=D),modal:"",header:"Edit Email Address",class:"max-w-96"},{default:U(()=>[e("div",null,[e("div",Ge,[e("p",null,[a[6]||(a[6]=e("span",null,"Current Email: ",-1)),e("span",He,w(r.user.email),1)]),e("div",We,[a[7]||(a[7]=e("label",{class:"text-mute text-sm font-semibold"},"New Email ",-1)),n($,{modelValue:o.value.email,"onUpdate:modelValue":a[1]||(a[1]=D=>o.value.email=D),fluid:""},null,8,["modelValue"])]),e("div",Oe,[e("div",Ke,[a[8]||(a[8]=e("label",{class:"text-mute text-sm font-semibold"},"Mark email as verified ",-1)),n(u,{modelValue:o.value.verified,"onUpdate:modelValue":a[2]||(a[2]=D=>o.value.verified=D)},null,8,["modelValue"])]),a[9]||(a[9]=e("small",{class:"text-xs text-mute mt-1"}," If you mark this email as verified, the user can log in without an OTP verification message sent to the email to verify it. ",-1))]),e("div",Je,[e("div",Qe,[a[10]||(a[10]=e("label",{class:"text-mute text-sm font-semibold"},"Notify user ",-1)),n(u,{modelValue:o.value.notify,"onUpdate:modelValue":a[3]||(a[3]=D=>o.value.notify=D)},null,8,["modelValue"])]),e("small",Xe," Send an email to "+w(r.user?r.user.name:"this user")+" notifying them their email has been changed. ",1)]),c.value?(v(),k("div",Ze,[n(B),a[11]||(a[11]=e("p",{class:"text-sm text-red-500 font-medium"}," Are you sure you want to proceed? Please, make sure you have entered a valid email. ",-1)),e("div",es,[n(y,{onClick:s,size:"small",label:"Cancel",icon:"pi pi-times",severity:"secondary"}),n(y,{onClick:_,loading:l(p),disabled:g.value,size:"small",label:"Proceed",icon:"pi pi-check",severity:"danger"},null,8,["loading","disabled"])])])):(v(),A(y,{key:0,onClick:a[4]||(a[4]=D=>c.value=!0),loading:l(p),disabled:g.value,label:l(p)?"Updating...":"Submit",fluid:""},null,8,["loading","disabled","label"]))])])]),_:1},8,["visible"])])}}}),ts={class:"grid gap-4"},ls={class:"font-semibold text-primary-500"},as={class:"grid"},ns={key:1},os={class:"mt-2 grid grid-cols-2 gap-2"},is=E({__name:"user-account-balance-editor",props:{account:{}},emits:["update"],setup(i,{emit:d}){const b=d,f=N(),t=z(!1),c=z(!1),o=z({walletBalance:i.account.walletBalance}),{isFetching:p,error:h,data:x,execute:m}=I(`/api/admins/me/accounts/${i.account.id}`,{immediate:!1}).put(o).json(),_=async()=>{if(await m(),h.value||!x.value){f.add({severity:"error",summary:"Failed",detail:h.value.message});return}f.add({severity:"success",summary:"Done",detail:"Account balance updated successfully",life:3e3}),c.value=!1,b("update",o.value.walletBalance??0),t.value=!1},g=Z(()=>p.value||o.value.walletBalance===i.account.walletBalance||o.value.walletBalance===null||o.value.walletBalance===void 0),s=()=>{c.value=!1,o.value.walletBalance=i.account.walletBalance,t.value=!1};return(r,a)=>{const y=T,$=ee,u=R,B=Y;return v(),k("div",null,[e("div",{onClick:a[0]||(a[0]=M=>t.value=!0),class:"cursor-pointer"},[j(r.$slots,"default",{},()=>[n(y,{label:"Edit",icon:"pi pi-pencil",size:"small",class:"px-2 py-1 border-0 bg-white text-primary-500"})])]),n(B,{visible:t.value,"onUpdate:visible":a[3]||(a[3]=M=>t.value=M),modal:"",header:"Edit Account Balance",class:"max-w-96"},{default:U(()=>[e("div",null,[e("div",ts,[e("p",null,[a[4]||(a[4]=e("span",null,"Current Balance: ",-1)),e("span",ls," $"+w(r.account.walletBalance.toLocaleString()),1)]),e("div",as,[a[5]||(a[5]=e("label",{class:"text-mute text-sm font-semibold"},"New Balance ",-1)),n($,{modelValue:o.value.walletBalance,"onUpdate:modelValue":a[1]||(a[1]=M=>o.value.walletBalance=M),"max-fraction-digits":2,fluid:""},null,8,["modelValue"])]),c.value?(v(),k("div",ns,[n(u),a[6]||(a[6]=e("p",{class:"text-sm text-red-500 font-medium"},"Are you sure you want to proceed?",-1)),e("div",os,[n(y,{onClick:s,size:"small",label:"Cancel",icon:"pi pi-times",severity:"secondary"}),n(y,{onClick:_,loading:l(p),disabled:g.value,size:"small",label:"Proceed",icon:"pi pi-check",severity:"danger"},null,8,["loading","disabled"])])])):(v(),A(y,{key:0,onClick:a[2]||(a[2]=M=>c.value=!0),disabled:g.value,label:"Submit",fluid:""},null,8,["disabled"]))])])]),_:1},8,["visible"])])}}}),rs={class:"flex items-center gap-1 justify-between flex-wrap whitespace-pre-wrap"},ds={class:"text-lg font-semibold text-primary"},us={key:0,class:"flex items-center gap-1"},ms={class:"mt-2 md:h-[calc(100dvh-9rem)]"},cs={key:2,class:"h-full grid md:grid-cols-5 gap-2"},ps={class:"md:h-full md:overflow-y-auto md:col-span-3"},fs={class:"flex items-center gap-4 flex-wrap"},vs={class:"w-32 aspect-square overflow-hidden rounded-full"},bs=["src","alt"],gs={class:"text-3xl font-semibold text-white"},xs={class:"text text-white font-medium"},ys={key:0,class:"text-sm"},ws={class:"mt-2"},_s={key:0,class:"v-card !p-2 bg-red-100 text-red-500 border dark:border-white/30 dark:bg-slate-800"},hs={class:"text-right text-sm text-red-400"},ks={key:0,class:"text-right text-sm text-red-400"},$s={class:"flex flex-col gap-2 *:flex-shrink-0"},zs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Bs={class:"text-right font-semibold"},Vs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Cs={class:"text-right font-semibold"},Us={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Ds={class:"text-right font-semibold"},Ms={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},As={class:"text-right font-semibold"},Fs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Ss={class:"text-right font-semibold"},Es={class:"md:h-full md:overflow-y-auto md:col-span-2"},Ts={class:"flex items-end justify-between gap-2 flex-wrap"},Ns={class:"font-semibold"},js={class:"text-2xl font-semibold"},Is={class:"flex flex-col gap-2 *:flex-shrink-0"},Ps={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Ys={class:"text-sm mt-2 flex flex-wrap gap-2 justify-between"},Rs={class:"font-semibold"},Ls={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},qs={class:"text-sm grid mt-2 gap-1"},Gs={class:"flex flex-wrap gap-2 justify-between"},Hs={class:"font-semibold"},Ws={key:0,class:"flex flex-wrap gap-2 justify-between"},Os={class:"font-semibold"},Ks={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Js={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Qs={class:"grid gap-2"},Xs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Zs={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},et={key:0,class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},st={key:1,class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},tt={class:"v-card !p-2 border dark:border-white/30 dark:bg-slate-800"},Vt=E({__name:"user",setup(i){const d=ne(),{user_id:b}=d.currentRoute.value.params,{isLoading:f,data:t,error:c,mutate:o}=xe(()=>`/api/admins/me/users/${b}`,re),p=async g=>{t.value&&await o(()=>Promise.resolve({success:!0,message:"User updated successfully",user:{...t.value.user,...g}}))},h=async g=>{var s,r;(r=(s=t.value)==null?void 0:s.user)!=null&&r.account&&await o(()=>Promise.resolve({success:!0,message:"Wallet balance updated successfully",user:{...t.value.user,account:{...t.value.user.account,walletBalance:g}}}))},x=async(g,s)=>{t.value&&await o(()=>Promise.resolve({success:!0,message:"Email updated successfully",user:{...t.value.user,email:g,verified:s}}))},m=async g=>{t.value&&await o(()=>Promise.resolve({success:!0,message:"Email updated successfully",user:{...t.value.user,isBanned:g}}))},_=()=>{d.back()};return(g,s)=>{const r=T,a=oe("RouterLink"),y=ge,$=be,u=ie,B=ve,M=is,D=ss,q=qe,G=Ie,H=Ve,W=we,O=te;return v(),A(O,{name:"admin"},{default:U(()=>{var V;return[e("div",null,[n($,{class:"!py-2"},{default:U(()=>{var C,S,P;return[e("div",rs,[e("h1",ds,w(((S=(C=l(t))==null?void 0:C.user)==null?void 0:S.name)||"User"),1),(P=l(t))!=null&&P.user?(v(),k("div",us,[n(a,{to:{name:"admin-email-service",query:{to_name:l(t).user.name,to_address:l(t).user.email}}},{default:U(()=>[n(r,{size:"small",severity:"secondary",label:"Send mail",icon:"pi pi-envelope"})]),_:1},8,["to"]),n(y,{user:l(t).user,onDone:p},null,8,["user"])])):F("",!0)])]}),_:1}),e("div",ms,[l(f)?(v(),A(u,{key:0})):l(c)?(v(),A(B,{key:1,error:l(c),"should-retry":"",onRetry:s[0]||(s[0]=C=>l(o)())},null,8,["error"])):(V=l(t))!=null&&V.user?(v(),k("div",cs,[e("div",ps,[n($,{class:"bg-gradient-x text-white"},{default:U(()=>[e("div",fs,[e("div",vs,[l(t).user.image?(v(),k("img",{key:0,src:l(t).user.image,alt:l(t).user.name},null,8,bs)):(v(),A(l(ye),{key:1,icon:"ic:baseline-account-circle",style:{"font-size":"8rem"},class:"text-white"}))]),e("div",null,[e("h1",gs,w(l(t).user.name),1),e("p",xs,w(l(t).user.email),1),l(t).user.region||l(t).user.country?(v(),k("p",ys,[e("span",null,w(l(t).user.region??"-"),1),s[7]||(s[7]=e("span",null,", ",-1)),e("span",null,w(l(t).user.country??"-"),1)])):F("",!0)])])]),_:1}),e("div",ws,[n($,{class:"grid gap-2",header:"Profile"},{default:U(()=>{var C;return[l(t).user.isBanned&&((C=l(t).user.ban)!=null&&C.active)?(v(),k("div",_s,[s[8]||(s[8]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-ban text-red-400 p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-red-400 text-sm font-semibold"},"Ban Status")],-1)),s[9]||(s[9]=e("p",{class:"text-right font-semibold"},"User Banned",-1)),e("p",hs,w(l(t).user.ban.reason),1),l(t).user.ban.expiresAt?(v(),k("p",ks," Banned until "+w(l(J)(l(t).user.ban.expiresAt,"MMMM DD, YYYY | HH:mm aa")),1)):F("",!0)])):F("",!0),e("div",$s,[e("div",zs,[s[10]||(s[10]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-phone text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Phone Number")],-1)),e("p",Bs,w(l(t).user.phoneNumber||"----------"),1)]),e("div",Vs,[s[11]||(s[11]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-map text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Address")],-1)),e("p",Cs,w(l(t).user.address||"----------"),1)]),e("div",Us,[s[12]||(s[12]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-map-marker text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Location")],-1)),e("p",Ds,w(l(t).user.region||"_____")+", "+w(l(t).user.country||"_____"),1)]),e("div",Ms,[s[13]||(s[13]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-check-circle text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Account Verification")],-1)),e("p",As,w(l(t).user.verified?"Verified":"Not Verified"),1)]),e("div",Fs,[s[14]||(s[14]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-calendar text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Account Creation Date")],-1)),e("p",Ss,w(l(J)(new Date(l(t).user.createdAt),"MMMM DD, YYYY | HH:mm aa")),1)])])]}),_:1})])]),e("div",Es,[l(t).user.account?(v(),A($,{key:0,header:"Account Balance",class:"bg-emerald-500 dark:bg-emerald-500/50 text-white","header-class":"text-white"},{default:U(()=>{var C,S;return[e("div",Ts,[e("div",Ns,[s[15]||(s[15]=e("span",null,"$",-1)),e("span",js,w((C=l(t).user.account)==null?void 0:C.walletBalance.toLocaleString().split(".")[0]),1),e("span",null,". "+w(((S=l(t).user.account)==null?void 0:S.walletBalance.toLocaleString().split(".")[1])||"00"),1)]),n(M,{account:l(t).user.account,onUpdate:h},null,8,["account"])])]}),_:1})):F("",!0),n($,{header:"Account",class:"mt-2"},{default:U(()=>{var C,S,P;return[e("div",Is,[e("div",Ps,[s[17]||(s[17]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-users text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Account Group")],-1)),e("div",Ys,[s[16]||(s[16]=e("p",null,"Group Name",-1)),e("p",Rs,w(((C=l(t).user.accountGroup)==null?void 0:C.name)||"No group"),1)]),l(t).user.accountGroup?(v(),A(r,{key:0,onClick:s[1]||(s[1]=K=>g.$router.push({name:"admin-account-group-editor",params:{account_group_id:l(t).user.accountGroup.id}})),label:"View Account Group",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",class:"mt-2",fluid:"",outlined:""})):F("",!0)]),e("div",Ls,[s[20]||(s[20]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-shield text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"KYC Verification")],-1)),e("div",qs,[e("div",Gs,[s[18]||(s[18]=e("p",null,"Status",-1)),e("p",Hs,w(l(le)((S=l(t).user.account)==null?void 0:S.kycStatus)),1)]),(P=l(t).user.account)!=null&&P.kycSubmittedAt?(v(),k("div",Ws,[s[19]||(s[19]=e("p",null,"Submitted On",-1)),e("p",Os,w(l(J)(new Date(l(t).user.account.kycSubmittedAt),"MMM DD, YYYY")),1)])):F("",!0),n(r,{onClick:s[2]||(s[2]=K=>g.$router.push({name:"admin-kyc-review",params:{user_id:l(t).user.id}})),label:"View Details",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",class:"mt-2",fluid:"",outlined:""})])]),e("div",Ks,[s[21]||(s[21]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-chart-line text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Investments")],-1)),n(r,{onClick:s[3]||(s[3]=K=>g.$router.push({name:"admin-investments",query:{user_id:l(t).user.id}})),label:"View Investments",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",class:"mt-2",fluid:"",outlined:""})]),e("div",Js,[s[22]||(s[22]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-wallet text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Transactions")],-1)),n(r,{onClick:s[4]||(s[4]=K=>g.$router.push({name:"admin-transactions",query:{user_id:l(t).user.id}})),label:"View Transactions",icon:"pi pi-chevron-right","icon-pos":"right",size:"small",class:"mt-2",fluid:"",outlined:""})])])]}),_:1}),n($,{header:"Settings",class:"mt-2"},{default:U(()=>[e("div",Qs,[e("div",Xs,[s[23]||(s[23]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-envelope text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute text-sm font-semibold"},"Change Email")],-1)),s[24]||(s[24]=e("div",null,[e("p",{class:"text-xs text-mute"},"Modify this user's email address")],-1)),n(D,{class:"mt-2",user:l(t).user,onUpdate:x},null,8,["user"])]),e("div",Zs,[s[25]||(s[25]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-lock text-mute p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-mute-500 text-sm font-semibold"},"Reset Password")],-1)),s[26]||(s[26]=e("div",null,[e("p",{class:"text-xs text-mute"}," Reset this user's password to the default '00000000' (8 zeros) ")],-1)),n(q,{class:"mt-2",user:l(t).user},null,8,["user"])]),l(t).user.isBanned?(v(),k("div",st,[s[29]||(s[29]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-lock text-amber-500 p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-amber-500 text-sm font-semibold"},"User Ban")],-1)),s[30]||(s[30]=e("div",null,[e("p",{class:"text-xs text-amber-500"},"Unban the user")],-1)),n(H,{class:"mt-2",user:l(t).user,onUnban:s[6]||(s[6]=C=>m(!1))},null,8,["user"])])):(v(),k("div",et,[s[27]||(s[27]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-lock text-amber-500 p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-amber-500 text-sm font-semibold"},"User Ban")],-1)),s[28]||(s[28]=e("div",null,[e("p",{class:"text-xs text-amber-500"},"Ban the user")],-1)),n(G,{class:"mt-2",user:l(t).user,onBan:s[5]||(s[5]=C=>m(!0))},null,8,["user"])])),e("div",tt,[s[31]||(s[31]=e("div",{class:"flex items-center"},[e("span",{class:"pi pi-trash text-red-500 p-1 rounded-full",style:{"font-size":"12px"}}),e("p",{class:"text-red-500 text-sm font-semibold"},"Delete Account")],-1)),s[32]||(s[32]=e("div",null,[e("p",{class:"text-xs text-red-500"}," Delete this user and all related details from the database. ")],-1)),n(W,{"user-id":l(t).user.id,onRemove:_},null,8,["user-id"])])])]),_:1})])])):F("",!0)])])]}),_:1})}}});export{Vt as default};
