import{_ as B}from"./vue-layout.vue_vue_type_script_setup_true_lang-BNFQYZFa.js";import{s as E,a as L}from"./index-5MJVKUv_.js";import{_ as S}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-CPslCPqh.js";import{d as z,a1 as P,Y as R,h as T,c as m,w as a,a as i,q as e,t as j,s as q,b as F,e as G,v as s,N as M,p as W,x as v,o as c}from"./main-DbwiCszp.js";import{_ as Y}from"./VNavbar.vue_vue_type_script_setup_true_lang-VZ6PBI-e.js";import{u as H,$ as I}from"./use-fetch-CkegAda4.js";import{u as J}from"./use-swrv-DVUkzGGN.js";import"./index-C9xlOZnF.js";import"./index-DeLv1j-i.js";import"./index-BxwU-vK-.js";import"./index-55yS1M7a.js";import"./index-TDOKOudS.js";import"./index-CVVhXnti.js";const K={class:"mt-2"},O={key:2,class:"w-full md:h-[calc(100dvh-9rem)] overflow-y-auto"},Q={class:"truncate"},U={class:"flex gap-4"},pe=z({__name:"account-groups",setup(X){const h=P(),d=R(),{isLoading:w,error:p,data:l,mutate:_}=J("/api/admins/me/account-groups",I),f=T(""),{error:g,data:b,execute:D}=H(()=>`/api/admins/me/account-groups/${f.value}`,{immediate:!1}).delete().json();async function k(t){if(f.value=t.id,t.isDeleting=!0,await D(),g.value||!b.value){d.add({severity:"error",summary:"Error",detail:g.value.message}),t.isDeleting=!1;return}await _(()=>Promise.resolve({success:!0,message:"Account group deleted",accountGroups:l.value.accountGroups.filter(r=>r.id!==t.id)})),d.add({severity:"success",summary:"Success",detail:"Account group deleted",life:3e3}),t.isDeleting=!1}const $=t=>{h.require({header:"Delete account group",message:"Are you sure you want to delete this account group?",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{k(t)}})};return(t,r)=>{const u=q,y=j("RouterLink"),x=Y,C=M,N=S,n=E,V=L,A=B;return c(),m(A,{name:"admin"},{default:a(()=>[i("div",null,[e(x,null,{right:a(()=>[e(y,{to:{name:"admin-account-group-editor"}},{default:a(()=>[e(u,{label:"New Group",icon:"pi pi-plus",size:"small"})]),_:1})]),_:1}),i("div",K,[s(w)?(c(),m(C,{key:0})):s(p)?(c(),m(N,{key:1,error:s(p),"should-retry":"",onRetry:r[0]||(r[0]=o=>s(_)())},null,8,["error"])):s(l)?(c(),F("div",O,[e(V,{value:s(l).accountGroups,size:"small",paginator:"",rows:10,tableStyle:"min-width: 50rem"},{default:a(()=>[e(n,{header:"S/N",style:{width:"10%"}},{body:a(({index:o})=>[W(v(o+1)+") ",1)]),_:1}),e(n,{field:"name",header:"Name",style:{"min-width":"30%"}}),e(n,{header:"Description",style:{"max-width":"10rem"}},{body:a(({data:o})=>[i("p",Q,v(o.description),1)]),_:1}),e(n,{header:"Actions"},{body:a(({data:o})=>[i("div",U,[e(y,{to:{name:"admin-account-group-editor",params:{account_group_id:o.id}}},{default:a(()=>[e(u,{label:"Edit",size:"small",outlined:"",icon:"pi pi-pencil"})]),_:2},1032,["to"]),e(u,{loading:o.isDeleting,onClick:Z=>$(o),label:"Delete",size:"small",outlined:"",icon:"pi pi-trash",severity:"danger"},null,8,["loading","onClick"])])]),_:1})]),_:1},8,["value"])])):G("",!0)])])]),_:1})}}});export{pe as default};
