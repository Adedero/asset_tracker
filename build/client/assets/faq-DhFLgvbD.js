import{_ as E}from"./vue-layout.vue_vue_type_script_setup_true_lang-BNFQYZFa.js";import{_ as B}from"./VCard.vue_vue_type_script_setup_true_lang-7nJJ2y1E.js";import{_ as Q}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-CPslCPqh.js";import{d as L,a1 as P,Y as j,h as z,c as d,w as u,a,q as p,x as F,v as r,s as S,b as $,e as R,N as I,F as M,f as T,o as n}from"./main-DbwiCszp.js";import{_ as W}from"./VNavbar.vue_vue_type_script_setup_true_lang-VZ6PBI-e.js";import{u as Y,$ as G}from"./use-fetch-CkegAda4.js";import{u as H}from"./use-swrv-DVUkzGGN.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-D-TZBpbX.js";const J={class:"flex items-center gap-2"},K={class:"text-primary-500 font-semibold"},O={class:"mt-2 md:h-[calc(100dvh-9rem)]"},U={key:2,class:"h-full w-full overflow-y-auto"},X={class:"grid gap-4"},Z={class:"line-clamp-2"},ee={class:"mt-2"},te={class:"flex items-center gap-2 justify-end"},ue=L({__name:"faq",setup(se){const k=P(),f=j(),{isLoading:C,error:y,data:l,mutate:g}=H("/api/admins/me/faqs",G),o=z(null),{isFetching:b,error:h,data:_,execute:x}=Y(()=>{var e;return`/api/admins/me/faqs/${(e=o.value)==null?void 0:e.id}`},{immediate:!1}).delete().json();async function V(){var e,t,i;if((e=l.value)!=null&&e.faqs){if(!o.value){f.add({severity:"error",summary:"Error",detail:"No FAQ selected"});return}if(await x(),h.value||!((t=_.value)!=null&&t.faq)){f.add({severity:"error",summary:"Error",detail:h.value.message});return}f.add({severity:"success",summary:"Success",detail:((i=_.value)==null?void 0:i.message)||"FAQ item deleted",life:3e3}),await g(()=>{var m;return Promise.resolve({success:!0,message:((m=_.value)==null?void 0:m.message)||"FAQ item deleted",faqs:l.value.faqs.filter(v=>{var c;return v.id!==((c=o.value)==null?void 0:c.id)})})}),o.value=null}}const w=()=>{o.value&&k.require({message:"Are you sure you want to proceed?",header:"Delete FAQ item",icon:"pi pi-exclamation-triangle",rejectProps:{label:"Cancel",severity:"secondary",outlined:!0},acceptProps:{label:"Delete",severity:"danger"},accept:()=>{V()}})},D=e=>{o.value=e,w()};return(e,t)=>{const i=S,m=W,v=I,c=Q,N=B,A=E;return n(),d(A,{name:"admin"},{default:u(()=>[a("div",null,[p(m,null,{left:u(()=>t[2]||(t[2]=[a("p",{class:"font-semibold text-primary-500 text-lg"},"FAQs",-1)])),right:u(()=>{var s;return[a("div",J,[a("p",K,F((s=r(l))==null?void 0:s.faqs.length),1),p(i,{onClick:t[0]||(t[0]=q=>e.$router.push({name:"admin-faq-item"})),label:"New",icon:"pi pi-plus",size:"small"})])]}),_:1}),a("div",O,[r(C)?(n(),d(v,{key:0})):r(y)?(n(),d(c,{key:1,error:r(y),"should-retry":"",onRetry:t[1]||(t[1]=s=>r(g)())},null,8,["error"])):r(l)?(n(),$("div",U,[a("div",X,[(n(!0),$(M,null,T(r(l).faqs,s=>(n(),d(N,{key:s.id,header:s.title},{default:u(()=>[a("div",Z,F(s.description),1),a("div",ee,[a("div",te,[p(i,{onClick:q=>e.$router.push({name:"admin-faq-item",params:{faq_id:s.id}}),label:"Edit",icon:"pi pi-file-edit",severity:"secondary",size:"small"},null,8,["onClick"]),p(i,{onClick:q=>D(s),loading:r(b),label:"Delete",icon:"pi pi-trash",severity:"danger",size:"small"},null,8,["onClick","loading"])])])]),_:2},1032,["header"]))),128))])])):R("",!0)])])]),_:1})}}});export{ue as default};
