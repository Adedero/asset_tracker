import{_ as j,t as V}from"./vue-layout.vue_vue_type_script_setup_true_lang-Dd9kIAe8.js";import{G as I,J as L,W as B,b as y,o as p,a as r,I as C,d as $,k as N,h as x,q as u,c as b,w as m,s as A,e as R,v as c,N as W,x as f,F as M,f as F,t as U,n as z,U as G}from"./main-CE88ee4Q.js";import{s as Y}from"./index-Cf5x4JsD.js";import{_ as q}from"./VCard.vue_vue_type_script_setup_true_lang-va0MW3Xd.js";import{_ as H}from"./VErrorMessage.vue_vue_type_script_setup_true_lang-U_TlgEzX.js";import{_ as K}from"./VNavbar.vue_vue_type_script_setup_true_lang-GcHfqelS.js";import{$ as J}from"./use-fetch-CNl_4VEC.js";import{u as Q}from"./use-swrv-ttgJgnvy.js";import"./bundle-mjs-CLJs87Zn.js";import"./iconify-0_DS-cBL.js";var X={root:{position:"relative"}},Z={root:"p-chart"},tt=I.extend({name:"chart",classes:Z,inlineStyles:X}),et={name:"BaseChart",extends:L,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:tt,provide:function(){return{$pcChart:this,$parentInstance:this}}},T={name:"Chart",extends:et,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;B(()=>import("./auto-C3mEb9gQ.js"),[]).then(function(n){e.chart&&(e.chart.destroy(),e.chart=null),n&&n.default&&(e.chart=new n.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),s=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&s&&this.$emit("select",{originalEvent:e,element:n[0],dataset:s})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function g(t){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(t)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),n.push.apply(n,s)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S(Object(n),!0).forEach(function(s){nt(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function nt(t,e,n){return(e=rt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t){var e=st(t,"string");return g(e)=="symbol"?e:e+""}function st(t,e){if(g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(g(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var at=["width","height"];function ot(t,e,n,s,h,i){return p(),y("div",C({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[r("canvas",C({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(a){return i.onCanvasClick(a)})},P(P({},t.canvasProps),t.ptm("canvas"))),null,16,at)],16)}T.render=ot;const it={class:"w-full flex items-center justify-center"},lt=$({__name:"deposit-withdrawal-chart",props:{transactions:{}},setup(t){N(()=>{e.value=s(),n.value=h()});const e=x(),n=x(),s=()=>{const i=getComputedStyle(document.documentElement),a=t.transactions.filter(l=>l.transactionType==="DEPOSIT"),d=t.transactions.filter(l=>l.transactionType==="WITHDRAWAL"),v=t.transactions.filter(l=>l.transactionType==="INVESTMENT"),_=t.transactions.filter(l=>l.transactionType==="PROFIT");return{labels:["Deposits","Withdrawals","Investments","Profits"],datasets:[{data:[a.length,d.length,v.length,_.length],backgroundColor:[i.getPropertyValue("--p-emerald-500"),i.getPropertyValue("--p-red-500"),i.getPropertyValue("--p-amber-500"),i.getPropertyValue("--p-blue-500")],hoverBackgroundColor:[i.getPropertyValue("--p-emerald-400"),i.getPropertyValue("--p-red-400"),i.getPropertyValue("--p-amber-500"),i.getPropertyValue("--p-blue-500")]}]}},h=()=>({plugins:{legend:{labels:{usePointStyle:!0,color:getComputedStyle(document.documentElement).getPropertyValue("--p-text-color")}}}});return(i,a)=>{const d=T;return p(),y("div",it,[u(d,{type:"pie",data:e.value,options:n.value},null,8,["data","options"])])}}}),ct={class:"h-full"},ut={class:"flex items-center gap-2"},pt={class:"mt-2 overflow-y-auto md:h-[calc(100dvh-8.5rem)]"},dt={key:1,class:"flex items-center justify-center w-full h-full"},mt={key:2,class:"w-full h-full grid gap-2 md:grid-rows-6 md:grid-cols-7"},ft={class:"flex flex-col items-end justify-end"},ht={class:"text-right text-2xl md:text-5xl font-semibold"},yt={class:"text-xl"},gt={class:"flex gap-1 justify-between"},vt={class:"py-2 h-[calc(100%-2rem)] overflow-y-auto flex flex-col gap-2 *:flex-shrink-0"},_t={class:"flex items-center gap-1"},bt={class:"text-mute font-semibold"},wt={class:"flex items-baseline gap-1 justify-between"},Ct={class:"text-mute"},xt={class:"text-right text-xl font-semibold"},St={class:"text-base text-mute"},Pt={class:"w-full overflow-y-auto md:h-[calc(100%-4rem)]"},Bt=$({__name:"wallet",setup(t){const{isLoading:e,data:n,error:s,mutate:h}=Q("/api/users/me/wallet",J);return(i,a)=>{const d=A,v=K,_=W,w=H,l=q,k=Y,O=U("RouterLink"),D=lt,E=j;return p(),b(E,{name:"user"},{default:m(()=>[r("div",ct,[u(v,null,{right:m(()=>[r("div",ut,[u(d,{onClick:a[0]||(a[0]=o=>i.$router.push({name:"user-deposit-currencies"})),size:"small",label:"Deposit",icon:"pi pi-wallet"}),u(d,{onClick:a[1]||(a[1]=o=>i.$router.push({name:"user-withdrawal-initialize"})),size:"small",label:"Withdraw",icon:"pi pi-money-bill",severity:"secondary"})])]),_:1}),r("div",pt,[c(e)?(p(),b(_,{key:0})):c(s)?(p(),y("div",dt,[u(w,{error:c(s),"should-retry":"",onRetry:a[2]||(a[2]=o=>c(h)())},null,8,["error"])])):c(n)?(p(),y("div",mt,[u(l,{class:"md:col-span-4 md:row-span-2 bg-gradient-y text-white",header:"Available Balance","header-class":"text-white"},{default:m(()=>[a[4]||(a[4]=r("div",{class:"flex justify-end mb-2"},[r("span",{class:"pi pi-dollar bg-white text-primary-500 p-2 rounded-full aspect-square"})],-1)),r("div",ft,[r("p",ht,f(c(n).walletBalance.toLocaleString().split(".")[0]),1),r("p",yt," ."+f(c(n).walletBalance.toLocaleString().split(".")[1]??"00"),1)])]),_:1,__:[4]}),u(l,{class:"md:col-span-3 md:row-span-6",header:"Recent Transactions"},{header:m(()=>[r("div",gt,[a[5]||(a[5]=r("h3",{class:"font-semibold text-mute"},"Recent Transactions",-1)),u(d,{onClick:a[3]||(a[3]=o=>i.$router.push({name:"user-transactions"})),size:"small",label:"See all",severity:"secondary",class:"dark:bg-slate-700 dark:hover:bg-slate-800 dark:border-transparent"})])]),default:m(()=>[r("div",vt,[(p(!0),y(M,null,F(c(n).transactions,o=>(p(),b(O,{key:o.id,to:{name:"user-transaction-receipt",params:{transaction_id:o.id}},class:"v-card !p-2 border transition-all hover:bg-slate-50 dark:hover:bg-slate-700 dark:border-white/30 dark:bg-slate-800"},{default:m(()=>[r("div",_t,[r("span",{class:z({"pi pi-arrow-circle-down text-emerald-500":o.transactionType==="DEPOSIT"||o.transactionType==="PROFIT","pi pi-arrow-circle-up text-red-500":o.transactionType==="WITHDRAWAL"||o.transactionType==="INVESTMENT"})},null,2),r("p",bt,f(o.isWireTransfer?"Wire Transfer":o.isGiftCard?"Gift Card":o.currency)+" "+f(c(V)(o.transactionType)),1),u(k,{severity:o.transactionStatus==="FAILED"?"danger":o.transactionStatus==="PENDING"?"warn":"success",value:o.transactionStatus.toLowerCase(),class:"ml-auto text-[0.7rem] px-1 py-0.5"},null,8,["severity","value"])]),r("div",wt,[r("small",Ct,f(c(G)(o.createdAt,"MMM DD, YYYY hh:mm:ss A",{locales:"en-US"})),1),r("p",xt,[r("span",null,"$"+f(o.amountInUSD.toLocaleString().split(".")[0]),1),r("span",St,"."+f(o.amountInUSD.toLocaleString().split(".")[1]||"00"),1)])])]),_:2},1032,["to"]))),128))])]),_:1}),u(l,{class:"md:col-span-4 md:row-span-4",header:"Trends"},{default:m(()=>[a[6]||(a[6]=r("small",{class:"font-medium"},"Last 20 transactions",-1)),r("div",Pt,[u(D,{transactions:c(n).transactions},null,8,["transactions"])])]),_:1,__:[6]})])):R("",!0)])])]),_:1})}}});export{Bt as default};
